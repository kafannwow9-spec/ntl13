"use strict";var Xr=Object.create;var Ge=Object.defineProperty;var Kr=Object.getOwnPropertyDescriptor;var Qr=Object.getOwnPropertyNames;var es=Object.getPrototypeOf,ts=Object.prototype.hasOwnProperty;var Z=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),At=(t,e)=>{for(var r in e)Ge(t,r,{get:e[r],enumerable:!0})},Nt=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Qr(e))!ts.call(t,n)&&n!==r&&Ge(t,n,{get:()=>e[n],enumerable:!(s=Kr(e,n))||s.enumerable});return t};var le=(t,e,r)=>(r=t!=null?Xr(es(t)):{},Nt(e||!t||!t.__esModule?Ge(r,"default",{value:t,enumerable:!0}):r,t)),rs=t=>Nt(Ge({},"__esModule",{value:!0}),t);var ft=Z((Za,Mt)=>{"use strict";var ss=require("path-to-regexp"),ns=require("debug")("express:router:layer"),as=Object.prototype.hasOwnProperty;Mt.exports=Re;function Re(t,e,r){if(!(this instanceof Re))return new Re(t,e,r);ns("new %o",t);var s=e||{};this.handle=r,this.name=r.name||"<anonymous>",this.params=void 0,this.path=void 0,this.regexp=ss(t,this.keys=[],s),this.regexp.fast_star=t==="*",this.regexp.fast_slash=t==="/"&&s.end===!1}Re.prototype.handle_error=function(e,r,s,n){var a=this.handle;if(a.length!==4)return n(e);try{a(e,r,s,n)}catch(o){n(o)}};Re.prototype.handle_request=function(e,r,s){var n=this.handle;if(n.length>3)return s();try{n(e,r,s)}catch(a){s(a)}};Re.prototype.match=function(e){var r;if(e!=null){if(this.regexp.fast_slash)return this.params={},this.path="",!0;if(this.regexp.fast_star)return this.params={0:Et(e)},this.path=e,!0;r=this.regexp.exec(e)}if(!r)return this.params=void 0,this.path=void 0,!1;this.params={},this.path=r[0];for(var s=this.keys,n=this.params,a=1;a<r.length;a++){var o=s[a-1],i=o.name,u=Et(r[a]);(u!==void 0||!as.call(n,i))&&(n[i]=u)}return!0};function Et(t){if(typeof t!="string"||t.length===0)return t;try{return decodeURIComponent(t)}catch(e){throw e instanceof URIError&&(e.message="Failed to decode param '"+t+"'",e.status=e.statusCode=400),e}}});var ht=Z((za,Ut)=>{"use strict";var Dt=require("debug")("express:router:route"),qt=require("array-flatten"),$t=ft(),is=require("methods"),Bt=Array.prototype.slice,Lt=Object.prototype.toString;Ut.exports=je;function je(t){this.path=t,this.stack=[],Dt("new %o",t),this.methods={}}je.prototype._handles_method=function(e){if(this.methods._all)return!0;var r=typeof e=="string"?e.toLowerCase():e;return r==="head"&&!this.methods.head&&(r="get"),!!this.methods[r]};je.prototype._options=function(){var e=Object.keys(this.methods);this.methods.get&&!this.methods.head&&e.push("head");for(var r=0;r<e.length;r++)e[r]=e[r].toUpperCase();return e};je.prototype.dispatch=function(e,r,s){var n=0,a=this.stack,o=0;if(a.length===0)return s();var i=typeof e.method=="string"?e.method.toLowerCase():e.method;i==="head"&&!this.methods.head&&(i="get"),e.route=this,u();function u(c){if(c&&c==="route")return s();if(c&&c==="router")return s(c);if(++o>100)return setImmediate(u,c);var p=a[n++];if(!p)return s(c);p.method&&p.method!==i?u(c):c?p.handle_error(c,e,r,u):p.handle_request(e,r,u),o=0}};je.prototype.all=function(){for(var e=qt(Bt.call(arguments)),r=0;r<e.length;r++){var s=e[r];if(typeof s!="function"){var n=Lt.call(s),a="Route.all() requires a callback function but got a "+n;throw new TypeError(a)}var o=$t("/",{},s);o.method=void 0,this.methods._all=!0,this.stack.push(o)}return this};is.forEach(function(t){je.prototype[t]=function(){for(var e=qt(Bt.call(arguments)),r=0;r<e.length;r++){var s=e[r];if(typeof s!="function"){var n=Lt.call(s),a="Route."+t+"() requires a callback function but got a "+n;throw new Error(a)}Dt("%s %o",t,this.path);var o=$t("/",{},s);o.method=t,this.methods[t]=!0,this.stack.push(o)}return this}})});var gt=Z((Wa,zt)=>{"use strict";var os=ht(),Vt=ft(),us=require("methods"),mt=require("utils-merge"),Je=require("debug")("express:router"),Ft=require("depd")("express"),cs=require("array-flatten"),ls=require("parseurl"),ds=require("setprototypeof"),ps=/^\[object (\S+)\]$/,Zt=Array.prototype.slice,fs=Object.prototype.toString,de=zt.exports=function(t){var e=t||{};function r(s,n,a){r.handle(s,n,a)}return ds(r,de),r.params={},r._params=[],r.caseSensitive=e.caseSensitive,r.mergeParams=e.mergeParams,r.strict=e.strict,r.stack=[],r};de.param=function(e,r){if(typeof e=="function"){Ft("router.param(fn): Refactor to use path params"),this._params.push(e);return}var s=this._params,n=s.length,a;e[0]===":"&&(Ft("router.param("+JSON.stringify(e)+", fn): Use router.param("+JSON.stringify(e.slice(1))+", fn) instead"),e=e.slice(1));for(var o=0;o<n;++o)(a=s[o](e,r))&&(r=a);if(typeof r!="function")throw new Error("invalid param() call for "+e+", got "+r);return(this.params[e]=this.params[e]||[]).push(r),this};de.handle=function(e,r,s){var n=this;Je("dispatching %s %s",e.method,e.url);var a=0,o=gs(e.url)||"",i="",u=!1,c=0,p={},m=[],I=n.stack,T=e.params,P=e.baseUrl||"",b=_s(s,e,"baseUrl","next","params");e.next=S,e.method==="OPTIONS"&&(b=xs(b,function(C,A){if(A||m.length===0)return C(A);bs(r,m,C)})),e.baseUrl=P,e.originalUrl=e.originalUrl||e.url,S();function S(C){var A=C==="route"?null:C;if(u&&(e.url=e.url.slice(1),u=!1),i.length!==0&&(e.baseUrl=P,e.url=o+i+e.url.slice(o.length),i=""),A==="router"){setImmediate(b,null);return}if(a>=I.length){setImmediate(b,A);return}if(++c>100)return setImmediate(S,C);var G=ms(e);if(G==null)return b(A);for(var F,V,ce;V!==!0&&a<I.length;)if(F=I[a++],V=vs(F,G),ce=F.route,typeof V!="boolean"&&(A=A||V),V===!0&&ce){if(A){V=!1;continue}var pt=e.method,jt=ce._handles_method(pt);!jt&&pt==="OPTIONS"&&hs(m,ce._options()),!jt&&pt!=="HEAD"&&(V=!1)}if(V!==!0)return b(A);ce&&(e.route=ce),e.params=n.mergeParams?ws(F.params,T):F.params;var Yr=F.path;n.process_params(F,p,e,r,function(Pt){Pt?S(A||Pt):ce?F.handle_request(e,r,S):O(F,A,Yr,G),c=0})}function O(C,A,G,F){if(G.length!==0){if(G!==F.slice(0,G.length)){S(A);return}var V=F[G.length];if(V&&V!=="/"&&V!==".")return S(A);Je("trim prefix (%s) from url %s",G,e.url),i=G,e.url=o+e.url.slice(o.length+i.length),!o&&e.url[0]!=="/"&&(e.url="/"+e.url,u=!0),e.baseUrl=P+(i[i.length-1]==="/"?i.substring(0,i.length-1):i)}Je("%s %s : %s",C.name,G,e.originalUrl),A?C.handle_error(A,e,r,S):C.handle_request(e,r,S)}};de.process_params=function(e,r,s,n,a){var o=this.params,i=e.keys;if(!i||i.length===0)return a();var u=0,c,p=0,m,I,T,P;function b(O){if(O)return a(O);if(u>=i.length)return a();if(p=0,m=i[u++],c=m.name,I=s.params[c],T=o[c],P=r[c],I===void 0||!T)return b();if(P&&(P.match===I||P.error&&P.error!=="route"))return s.params[c]=P.value,b(P.error);r[c]=P={error:null,match:I,value:I},S()}function S(O){var C=T[p++];if(P.value=s.params[m.name],O){P.error=O,b(O);return}if(!C)return b();try{C(s,n,S,I,m.name)}catch(A){S(A)}}b()};de.use=function(e){var r=0,s="/";if(typeof e!="function"){for(var n=e;Array.isArray(n)&&n.length!==0;)n=n[0];typeof n!="function"&&(r=1,s=e)}var a=cs(Zt.call(arguments,r));if(a.length===0)throw new TypeError("Router.use() requires a middleware function");for(var o=0;o<a.length;o++){var e=a[o];if(typeof e!="function")throw new TypeError("Router.use() requires a middleware function but got a "+ys(e));Je("use %o %s",s,e.name||"<anonymous>");var i=new Vt(s,{sensitive:this.caseSensitive,strict:!1,end:!1},e);i.route=void 0,this.stack.push(i)}return this};de.route=function(e){var r=new os(e),s=new Vt(e,{sensitive:this.caseSensitive,strict:this.strict,end:!0},r.dispatch.bind(r));return s.route=r,this.stack.push(s),r};us.concat("all").forEach(function(t){de[t]=function(e){var r=this.route(e);return r[t].apply(r,Zt.call(arguments,1)),this}});function hs(t,e){for(var r=0;r<e.length;r++){var s=e[r];t.indexOf(s)===-1&&t.push(s)}}function ms(t){try{return ls(t).pathname}catch{return}}function gs(t){if(!(typeof t!="string"||t.length===0||t[0]==="/")){var e=t.indexOf("?"),r=e!==-1?e:t.length,s=t.slice(0,r).indexOf("://");return s!==-1?t.substring(0,t.indexOf("/",3+s)):void 0}}function ys(t){var e=typeof t;return e!=="object"?e:fs.call(t).replace(ps,"$1")}function vs(t,e){try{return t.match(e)}catch(r){return r}}function ws(t,e){if(typeof e!="object"||!e)return t;var r=mt({},e);if(!(0 in t)||!(0 in e))return mt(r,t);for(var s=0,n=0;s in t;)s++;for(;n in e;)n++;for(s--;s>=0;s--)t[s+n]=t[s],s<n&&delete t[s];return mt(r,t)}function _s(t,e){for(var r=new Array(arguments.length-2),s=new Array(arguments.length-2),n=0;n<r.length;n++)r[n]=arguments[n+2],s[n]=e[r[n]];return function(){for(var a=0;a<r.length;a++)e[r[a]]=s[a];return t.apply(this,arguments)}}function bs(t,e,r){try{var s=e.join(",");t.set("Allow",s),t.send(s)}catch(n){r(n)}}function xs(t,e){return function(){var s=new Array(arguments.length+1);s[0]=t;for(var n=0,a=arguments.length;n<a;n++)s[n+1]=arguments[n];e.apply(this,s)}}});var Gt=Z(Ht=>{"use strict";var Wt=require("setprototypeof");Ht.init=function(t){return function(r,s,n){t.enabled("x-powered-by")&&s.setHeader("X-Powered-By","Express"),r.res=s,s.req=r,r.next=n,Wt(r,t.request),Wt(s,t.response),s.locals=s.locals||Object.create(null),n()}}});var yt=Z((Ga,Jt)=>{"use strict";var ks=require("utils-merge"),Ts=require("parseurl"),Ss=require("qs");Jt.exports=function(e){var r=ks({},e),s=Ss.parse;return typeof e=="function"&&(s=e,r=void 0),r!==void 0&&r.allowPrototypes===void 0&&(r.allowPrototypes=!0),function(a,o,i){if(!a.query){var u=Ts(a).query;a.query=s(u,r)}i()}}});var er=Z((Ja,Qt)=>{"use strict";var Ye=require("debug")("express:view"),Fe=require("path"),Cs=require("fs"),Is=Fe.dirname,Kt=Fe.basename,Os=Fe.extname,Yt=Fe.join,Rs=Fe.resolve;Qt.exports=Xe;function Xe(t,e){var r=e||{};if(this.defaultEngine=r.defaultEngine,this.ext=Os(t),this.name=t,this.root=r.root,!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");var s=t;if(this.ext||(this.ext=this.defaultEngine[0]!=="."?"."+this.defaultEngine:this.defaultEngine,s+=this.ext),!r.engines[this.ext]){var n=this.ext.slice(1);Ye('require "%s"',n);var a=require(n).__express;if(typeof a!="function")throw new Error('Module "'+n+'" does not provide a view engine.');r.engines[this.ext]=a}this.engine=r.engines[this.ext],this.path=this.lookup(s)}Xe.prototype.lookup=function(e){var r,s=[].concat(this.root);Ye('lookup "%s"',e);for(var n=0;n<s.length&&!r;n++){var a=s[n],o=Rs(a,e),i=Is(o),u=Kt(o);r=this.resolve(i,u)}return r};Xe.prototype.render=function(e,r){Ye('render "%s"',this.path),this.engine(this.path,e,r)};Xe.prototype.resolve=function(e,r){var s=this.ext,n=Yt(e,r),a=Xt(n);if(a&&a.isFile()||(n=Yt(e,Kt(r,s),"index"+s),a=Xt(n),a&&a.isFile()))return n};function Xt(t){Ye('stat "%s"',t);try{return Cs.statSync(t)}catch{return}}});var ne=Z(q=>{"use strict";var tr=require("safe-buffer").Buffer,js=require("content-disposition"),rr=require("content-type"),sr=require("depd")("express"),Ps=require("array-flatten"),As=require("send").mime,Ns=require("etag"),Es=require("proxy-addr"),Ms=require("qs"),Ds=require("querystring");q.etag=nr({weak:!1});q.wetag=nr({weak:!0});q.isAbsolute=function(t){if(t[0]==="/"||t[1]===":"&&(t[2]==="\\"||t[2]==="/")||t.substring(0,2)==="\\\\")return!0};q.flatten=sr.function(Ps,"utils.flatten: use array-flatten npm module instead");q.normalizeType=function(t){return~t.indexOf("/")?qs(t):{value:As.lookup(t),params:{}}};q.normalizeTypes=function(t){for(var e=[],r=0;r<t.length;++r)e.push(q.normalizeType(t[r]));return e};q.contentDisposition=sr.function(js,"utils.contentDisposition: use content-disposition npm module instead");function qs(t){for(var e=t.split(/ *; */),r={value:e[0],quality:1,params:{}},s=1;s<e.length;++s){var n=e[s].split(/ *= */);n[0]==="q"?r.quality=parseFloat(n[1]):r.params[n[0]]=n[1]}return r}q.compileETag=function(t){var e;if(typeof t=="function")return t;switch(t){case!0:case"weak":e=q.wetag;break;case!1:break;case"strong":e=q.etag;break;default:throw new TypeError("unknown value for etag function: "+t)}return e};q.compileQueryParser=function(e){var r;if(typeof e=="function")return e;switch(e){case!0:case"simple":r=Ds.parse;break;case!1:r=Bs;break;case"extended":r=$s;break;default:throw new TypeError("unknown value for query parser function: "+e)}return r};q.compileTrust=function(t){return typeof t=="function"?t:t===!0?function(){return!0}:typeof t=="number"?function(e,r){return r<t}:(typeof t=="string"&&(t=t.split(",").map(function(e){return e.trim()})),Es.compile(t||[]))};q.setCharset=function(e,r){if(!e||!r)return e;var s=rr.parse(e);return s.parameters.charset=r,rr.format(s)};function nr(t){return function(r,s){var n=tr.isBuffer(r)?r:tr.from(r,s);return Ns(n,t)}}function $s(t){return Ms.parse(t,{allowPrototypes:!0})}function Bs(){return{}}});var or=Z((ar,ir)=>{"use strict";var Ls=require("finalhandler"),Us=gt(),wt=require("methods"),Fs=Gt(),Vs=yt(),Ke=require("debug")("express:application"),Zs=er(),zs=require("http"),Ws=ne().compileETag,Hs=ne().compileQueryParser,Gs=ne().compileTrust,Js=require("depd")("express"),Ys=require("array-flatten"),vt=require("utils-merge"),Xs=require("path").resolve,Pe=require("setprototypeof"),Ks=Object.prototype.hasOwnProperty,bt=Array.prototype.slice,N=ar=ir.exports={},_t="@@symbol:trust_proxy_default";N.init=function(){this.cache={},this.engines={},this.settings={},this.defaultConfiguration()};N.defaultConfiguration=function(){var e="production";this.enable("x-powered-by"),this.set("etag","weak"),this.set("env",e),this.set("query parser","extended"),this.set("subdomain offset",2),this.set("trust proxy",!1),Object.defineProperty(this.settings,_t,{configurable:!0,value:!0}),Ke("booting in %s mode",e),this.on("mount",function(s){this.settings[_t]===!0&&typeof s.settings["trust proxy fn"]=="function"&&(delete this.settings["trust proxy"],delete this.settings["trust proxy fn"]),Pe(this.request,s.request),Pe(this.response,s.response),Pe(this.engines,s.engines),Pe(this.settings,s.settings)}),this.locals=Object.create(null),this.mountpath="/",this.locals.settings=this.settings,this.set("view",Zs),this.set("views",Xs("views")),this.set("jsonp callback name","callback"),e==="production"&&this.enable("view cache"),Object.defineProperty(this,"router",{get:function(){throw new Error(`'app.router' is deprecated!
Please see the 3.x to 4.x migration guide for details on how to update your app.`)}})};N.lazyrouter=function(){this._router||(this._router=new Us({caseSensitive:this.enabled("case sensitive routing"),strict:this.enabled("strict routing")}),this._router.use(Vs(this.get("query parser fn"))),this._router.use(Fs.init(this)))};N.handle=function(e,r,s){var n=this._router,a=s||Ls(e,r,{env:this.get("env"),onerror:Qs.bind(this)});if(!n){Ke("no routes defined on app"),a();return}n.handle(e,r,a)};N.use=function(e){var r=0,s="/";if(typeof e!="function"){for(var n=e;Array.isArray(n)&&n.length!==0;)n=n[0];typeof n!="function"&&(r=1,s=e)}var a=Ys(bt.call(arguments,r));if(a.length===0)throw new TypeError("app.use() requires a middleware function");this.lazyrouter();var o=this._router;return a.forEach(function(i){if(!i||!i.handle||!i.set)return o.use(s,i);Ke(".use app under %s",s),i.mountpath=s,i.parent=this,o.use(s,function(c,p,m){var I=c.app;i.handle(c,p,function(T){Pe(c,I.request),Pe(p,I.response),m(T)})}),i.emit("mount",this)},this),this};N.route=function(e){return this.lazyrouter(),this._router.route(e)};N.engine=function(e,r){if(typeof r!="function")throw new Error("callback function required");var s=e[0]!=="."?"."+e:e;return this.engines[s]=r,this};N.param=function(e,r){if(this.lazyrouter(),Array.isArray(e)){for(var s=0;s<e.length;s++)this.param(e[s],r);return this}return this._router.param(e,r),this};N.set=function(e,r){if(arguments.length===1){for(var s=this.settings;s&&s!==Object.prototype;){if(Ks.call(s,e))return s[e];s=Object.getPrototypeOf(s)}return}switch(Ke('set "%s" to %o',e,r),this.settings[e]=r,e){case"etag":this.set("etag fn",Ws(r));break;case"query parser":this.set("query parser fn",Hs(r));break;case"trust proxy":this.set("trust proxy fn",Gs(r)),Object.defineProperty(this.settings,_t,{configurable:!0,value:!1});break}return this};N.path=function(){return this.parent?this.parent.path()+this.mountpath:""};N.enabled=function(e){return!!this.set(e)};N.disabled=function(e){return!this.set(e)};N.enable=function(e){return this.set(e,!0)};N.disable=function(e){return this.set(e,!1)};wt.forEach(function(t){N[t]=function(e){if(t==="get"&&arguments.length===1)return this.set(e);this.lazyrouter();var r=this._router.route(e);return r[t].apply(r,bt.call(arguments,1)),this}});N.all=function(e){this.lazyrouter();for(var r=this._router.route(e),s=bt.call(arguments,1),n=0;n<wt.length;n++)r[wt[n]].apply(r,s);return this};N.del=Js.function(N.delete,"app.del: Use app.delete instead");N.render=function(e,r,s){var n=this.cache,a=s,o=this.engines,i=r,u={},c;if(typeof r=="function"&&(a=r,i={}),vt(u,this.locals),i._locals&&vt(u,i._locals),vt(u,i),u.cache==null&&(u.cache=this.enabled("view cache")),u.cache&&(c=n[e]),!c){var p=this.get("view");if(c=new p(e,{defaultEngine:this.get("view engine"),root:this.get("views"),engines:o}),!c.path){var m=Array.isArray(c.root)&&c.root.length>1?'directories "'+c.root.slice(0,-1).join('", "')+'" or "'+c.root[c.root.length-1]+'"':'directory "'+c.root+'"',I=new Error('Failed to lookup view "'+e+'" in views '+m);return I.view=c,a(I)}u.cache&&(n[e]=c)}en(c,u,a)};N.listen=function(){var e=zs.createServer(this);return e.listen.apply(e,arguments)};function Qs(t){this.get("env")!=="test"&&console.error(t.stack||t.toString())}function en(t,e,r){try{t.render(e,r)}catch(s){r(s)}}});var lr=Z((Xa,cr)=>{"use strict";var Qe=require("accepts"),Ve=require("depd")("express"),tn=require("net").isIP,rn=require("type-is"),sn=require("http"),nn=require("fresh"),an=require("range-parser"),on=require("parseurl"),ur=require("proxy-addr"),R=Object.create(sn.IncomingMessage.prototype);cr.exports=R;R.get=R.header=function(e){if(!e)throw new TypeError("name argument is required to req.get");if(typeof e!="string")throw new TypeError("name must be a string to req.get");var r=e.toLowerCase();switch(r){case"referer":case"referrer":return this.headers.referrer||this.headers.referer;default:return this.headers[r]}};R.accepts=function(){var t=Qe(this);return t.types.apply(t,arguments)};R.acceptsEncodings=function(){var t=Qe(this);return t.encodings.apply(t,arguments)};R.acceptsEncoding=Ve.function(R.acceptsEncodings,"req.acceptsEncoding: Use acceptsEncodings instead");R.acceptsCharsets=function(){var t=Qe(this);return t.charsets.apply(t,arguments)};R.acceptsCharset=Ve.function(R.acceptsCharsets,"req.acceptsCharset: Use acceptsCharsets instead");R.acceptsLanguages=function(){var t=Qe(this);return t.languages.apply(t,arguments)};R.acceptsLanguage=Ve.function(R.acceptsLanguages,"req.acceptsLanguage: Use acceptsLanguages instead");R.range=function(e,r){var s=this.get("Range");if(s)return an(e,s,r)};R.param=function(e,r){var s=this.params||{},n=this.body||{},a=this.query||{},o=arguments.length===1?"name":"name, default";return Ve("req.param("+o+"): Use req.params, req.body, or req.query instead"),s[e]!=null&&s.hasOwnProperty(e)?s[e]:n[e]!=null?n[e]:a[e]!=null?a[e]:r};R.is=function(e){var r=e;if(!Array.isArray(e)){r=new Array(arguments.length);for(var s=0;s<r.length;s++)r[s]=arguments[s]}return rn(this,r)};J(R,"protocol",function(){var e=this.connection.encrypted?"https":"http",r=this.app.get("trust proxy fn");if(!r(this.connection.remoteAddress,0))return e;var s=this.get("X-Forwarded-Proto")||e,n=s.indexOf(",");return n!==-1?s.substring(0,n).trim():s.trim()});J(R,"secure",function(){return this.protocol==="https"});J(R,"ip",function(){var e=this.app.get("trust proxy fn");return ur(this,e)});J(R,"ips",function(){var e=this.app.get("trust proxy fn"),r=ur.all(this,e);return r.reverse().pop(),r});J(R,"subdomains",function(){var e=this.hostname;if(!e)return[];var r=this.app.get("subdomain offset"),s=tn(e)?[e]:e.split(".").reverse();return s.slice(r)});J(R,"path",function(){return on(this).pathname});J(R,"hostname",function(){var e=this.app.get("trust proxy fn"),r=this.get("X-Forwarded-Host");if(!r||!e(this.connection.remoteAddress,0)?r=this.get("Host"):r.indexOf(",")!==-1&&(r=r.substring(0,r.indexOf(",")).trimRight()),!!r){var s=r[0]==="["?r.indexOf("]")+1:0,n=r.indexOf(":",s);return n!==-1?r.substring(0,n):r}});J(R,"host",Ve.function(function(){return this.hostname},"req.host: Use req.hostname instead"));J(R,"fresh",function(){var t=this.method,e=this.res,r=e.statusCode;return t!=="GET"&&t!=="HEAD"?!1:r>=200&&r<300||r===304?nn(this.headers,{etag:e.get("ETag"),"last-modified":e.get("Last-Modified")}):!1});J(R,"stale",function(){return!this.fresh});J(R,"xhr",function(){var e=this.get("X-Requested-With")||"";return e.toLowerCase()==="xmlhttprequest"});function J(t,e,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:r})}});var vr=Z((Ka,yr)=>{"use strict";var Ze=require("safe-buffer").Buffer,dr=require("content-disposition"),un=require("http-errors"),$=require("depd")("express"),cn=require("encodeurl"),ln=require("escape-html"),dn=require("http"),pn=ne().isAbsolute,fn=require("on-finished"),pr=require("path"),et=require("statuses"),fr=require("utils-merge"),hn=require("cookie-signature").sign,mn=ne().normalizeType,gn=ne().normalizeTypes,yn=ne().setCharset,vn=require("cookie"),xt=require("send"),wn=pr.extname,hr=xt.mime,_n=pr.resolve,bn=require("vary"),j=Object.create(dn.ServerResponse.prototype);yr.exports=j;var xn=/;\s*charset\s*=/;j.status=function(e){return(typeof e=="string"||Math.floor(e)!==e)&&e>99&&e<1e3&&$("res.status("+JSON.stringify(e)+"): use res.status("+Math.floor(e)+") instead"),this.statusCode=e,this};j.links=function(t){var e=this.get("Link")||"";return e&&(e+=", "),this.set("Link",e+Object.keys(t).map(function(r){return"<"+t[r]+'>; rel="'+r+'"'}).join(", "))};j.send=function(e){var r=e,s,n=this.req,a,o=this.app;switch(arguments.length===2&&(typeof arguments[0]!="number"&&typeof arguments[1]=="number"?($("res.send(body, status): Use res.status(status).send(body) instead"),this.statusCode=arguments[1]):($("res.send(status, body): Use res.status(status).send(body) instead"),this.statusCode=arguments[0],r=arguments[1])),typeof r=="number"&&arguments.length===1&&(this.get("Content-Type")||this.type("txt"),$("res.send(status): Use res.sendStatus(status) instead"),this.statusCode=r,r=et.message[r]),typeof r){case"string":this.get("Content-Type")||this.type("html");break;case"boolean":case"number":case"object":if(r===null)r="";else if(Ze.isBuffer(r))this.get("Content-Type")||this.type("bin");else return this.json(r);break}typeof r=="string"&&(s="utf8",a=this.get("Content-Type"),typeof a=="string"&&this.set("Content-Type",yn(a,"utf-8")));var i=o.get("etag fn"),u=!this.get("ETag")&&typeof i=="function",c;r!==void 0&&(Ze.isBuffer(r)?c=r.length:!u&&r.length<1e3?c=Ze.byteLength(r,s):(r=Ze.from(r,s),s=void 0,c=r.length),this.set("Content-Length",c));var p;return u&&c!==void 0&&(p=i(r,s))&&this.set("ETag",p),n.fresh&&(this.statusCode=304),(this.statusCode===204||this.statusCode===304)&&(this.removeHeader("Content-Type"),this.removeHeader("Content-Length"),this.removeHeader("Transfer-Encoding"),r=""),this.statusCode===205&&(this.set("Content-Length","0"),this.removeHeader("Transfer-Encoding"),r=""),n.method==="HEAD"?this.end():this.end(r,s),this};j.json=function(e){var r=e;arguments.length===2&&(typeof arguments[1]=="number"?($("res.json(obj, status): Use res.status(status).json(obj) instead"),this.statusCode=arguments[1]):($("res.json(status, obj): Use res.status(status).json(obj) instead"),this.statusCode=arguments[0],r=arguments[1]));var s=this.app,n=s.get("json escape"),a=s.get("json replacer"),o=s.get("json spaces"),i=gr(r,a,o,n);return this.get("Content-Type")||this.set("Content-Type","application/json"),this.send(i)};j.jsonp=function(e){var r=e;arguments.length===2&&(typeof arguments[1]=="number"?($("res.jsonp(obj, status): Use res.status(status).jsonp(obj) instead"),this.statusCode=arguments[1]):($("res.jsonp(status, obj): Use res.status(status).jsonp(obj) instead"),this.statusCode=arguments[0],r=arguments[1]));var s=this.app,n=s.get("json escape"),a=s.get("json replacer"),o=s.get("json spaces"),i=gr(r,a,o,n),u=this.req.query[s.get("jsonp callback name")];return this.get("Content-Type")||(this.set("X-Content-Type-Options","nosniff"),this.set("Content-Type","application/json")),Array.isArray(u)&&(u=u[0]),typeof u=="string"&&u.length!==0&&(this.set("X-Content-Type-Options","nosniff"),this.set("Content-Type","text/javascript"),u=u.replace(/[^\[\]\w$.]/g,""),i===void 0?i="":typeof i=="string"&&(i=i.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")),i="/**/ typeof "+u+" === 'function' && "+u+"("+i+");"),this.send(i)};j.sendStatus=function(e){var r=et.message[e]||String(e);return this.statusCode=e,this.type("txt"),this.send(r)};j.sendFile=function(e,r,s){var n=s,a=this.req,o=this,i=a.next,u=r||{};if(!e)throw new TypeError("path argument is required to res.sendFile");if(typeof e!="string")throw new TypeError("path must be a string to res.sendFile");if(typeof r=="function"&&(n=r,u={}),!u.root&&!pn(e))throw new TypeError("path must be absolute or specify root to res.sendFile");var c=encodeURI(e),p=xt(a,c,u);mr(o,p,u,function(m){if(n)return n(m);if(m&&m.code==="EISDIR")return i();m&&m.code!=="ECONNABORTED"&&m.syscall!=="write"&&i(m)})};j.sendfile=function(t,e,r){var s=r,n=this.req,a=this,o=n.next,i=e||{};typeof e=="function"&&(s=e,i={});var u=xt(n,t,i);mr(a,u,i,function(c){if(s)return s(c);if(c&&c.code==="EISDIR")return o();c&&c.code!=="ECONNABORTED"&&c.syscall!=="write"&&o(c)})};j.sendfile=$.function(j.sendfile,"res.sendfile: Use res.sendFile instead");j.download=function(e,r,s,n){var a=n,o=r,i=s||null;typeof r=="function"?(a=r,o=null,i=null):typeof s=="function"&&(a=s,i=null),typeof r=="object"&&(typeof s=="function"||s===void 0)&&(o=null,i=r);var u={"Content-Disposition":dr(o||e)};if(i&&i.headers)for(var c=Object.keys(i.headers),p=0;p<c.length;p++){var m=c[p];m.toLowerCase()!=="content-disposition"&&(u[m]=i.headers[m])}i=Object.create(i),i.headers=u;var I=i.root?e:_n(e);return this.sendFile(I,i,a)};j.contentType=j.type=function(e){var r=e.indexOf("/")===-1?hr.lookup(e):e;return this.set("Content-Type",r)};j.format=function(t){var e=this.req,r=e.next,s=Object.keys(t).filter(function(a){return a!=="default"}),n=s.length>0?e.accepts(s):!1;return this.vary("Accept"),n?(this.set("Content-Type",mn(n).value),t[n](e,this,r)):t.default?t.default(e,this,r):r(un(406,{types:gn(s).map(function(a){return a.value})})),this};j.attachment=function(e){return e&&this.type(wn(e)),this.set("Content-Disposition",dr(e)),this};j.append=function(e,r){var s=this.get(e),n=r;return s&&(n=Array.isArray(s)?s.concat(r):Array.isArray(r)?[s].concat(r):[s,r]),this.set(e,n)};j.set=j.header=function(e,r){if(arguments.length===2){var s=Array.isArray(r)?r.map(String):String(r);if(e.toLowerCase()==="content-type"){if(Array.isArray(s))throw new TypeError("Content-Type cannot be set to an Array");if(!xn.test(s)){var n=hr.charsets.lookup(s.split(";")[0]);n&&(s+="; charset="+n.toLowerCase())}}this.setHeader(e,s)}else for(var a in e)this.set(a,e[a]);return this};j.get=function(t){return this.getHeader(t)};j.clearCookie=function(e,r){r&&(r.maxAge&&$('res.clearCookie: Passing "options.maxAge" is deprecated. In v5.0.0 of Express, this option will be ignored, as res.clearCookie will automatically set cookies to expire immediately. Please update your code to omit this option.'),r.expires&&$('res.clearCookie: Passing "options.expires" is deprecated. In v5.0.0 of Express, this option will be ignored, as res.clearCookie will automatically set cookies to expire immediately. Please update your code to omit this option.'));var s=fr({expires:new Date(1),path:"/"},r);return this.cookie(e,"",s)};j.cookie=function(t,e,r){var s=fr({},r),n=this.req.secret,a=s.signed;if(a&&!n)throw new Error('cookieParser("secret") required for signed cookies');var o=typeof e=="object"?"j:"+JSON.stringify(e):String(e);if(a&&(o="s:"+hn(o,n)),s.maxAge!=null){var i=s.maxAge-0;isNaN(i)||(s.expires=new Date(Date.now()+i),s.maxAge=Math.floor(i/1e3))}return s.path==null&&(s.path="/"),this.append("Set-Cookie",vn.serialize(t,String(o),s)),this};j.location=function(e){var r;return e==="back"?($('res.location("back"): use res.location(req.get("Referrer") || "/") and refer to https://dub.sh/security-redirect for best practices'),r=this.req.get("Referrer")||"/"):r=String(e),this.set("Location",cn(r))};j.redirect=function(e){var r=e,s,n=302;arguments.length===2&&(typeof arguments[0]=="number"?(n=arguments[0],r=arguments[1]):($("res.redirect(url, status): Use res.redirect(status, url) instead"),n=arguments[1])),r=this.location(r).get("Location"),this.format({text:function(){s=et.message[n]+". Redirecting to "+r},html:function(){var a=ln(r);s="<p>"+et.message[n]+". Redirecting to "+a+"</p>"},default:function(){s=""}}),this.statusCode=n,this.set("Content-Length",Ze.byteLength(s)),this.req.method==="HEAD"?this.end():this.end(s)};j.vary=function(t){return!t||Array.isArray(t)&&!t.length?($("res.vary(): Provide a field name"),this):(bn(this,t),this)};j.render=function(e,r,s){var n=this.req.app,a=s,o=r||{},i=this.req,u=this;typeof r=="function"&&(a=r,o={}),o._locals=u.locals,a=a||function(c,p){if(c)return i.next(c);u.send(p)},n.render(e,o,a)};function mr(t,e,r,s){var n=!1,a;function o(){if(!n){n=!0;var T=new Error("Request aborted");T.code="ECONNABORTED",s(T)}}function i(){if(!n){n=!0;var T=new Error("EISDIR, read");T.code="EISDIR",s(T)}}function u(T){n||(n=!0,s(T))}function c(){n||(n=!0,s())}function p(){a=!1}function m(T){if(T&&T.code==="ECONNRESET")return o();if(T)return u(T);n||setImmediate(function(){if(a!==!1&&!n){o();return}n||(n=!0,s())})}function I(){a=!0}e.on("directory",i),e.on("end",c),e.on("error",u),e.on("file",p),e.on("stream",I),fn(t,m),r.headers&&e.on("headers",function(P){for(var b=r.headers,S=Object.keys(b),O=0;O<S.length;O++){var C=S[O];P.setHeader(C,b[C])}}),e.pipe(t)}function gr(t,e,r,s){var n=e||r?JSON.stringify(t,e,r):JSON.stringify(t);return s&&typeof n=="string"&&(n=n.replace(/[<>&]/g,function(a){switch(a.charCodeAt(0)){case 60:return"\\u003c";case 62:return"\\u003e";case 38:return"\\u0026";default:return a}})),n}});var Tr=Z((B,kr)=>{"use strict";var tt=require("body-parser"),kn=require("events").EventEmitter,wr=require("merge-descriptors"),_r=or(),Tn=ht(),Sn=gt(),br=lr(),xr=vr();B=kr.exports=Cn;function Cn(){var t=function(e,r,s){t.handle(e,r,s)};return wr(t,kn.prototype,!1),wr(t,_r,!1),t.request=Object.create(br,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.response=Object.create(xr,{app:{configurable:!0,enumerable:!0,writable:!0,value:t}}),t.init(),t}B.application=_r;B.request=br;B.response=xr;B.Route=Tn;B.Router=Sn;B.json=tt.json;B.query=yt();B.raw=tt.raw;B.static=require("serve-static");B.text=tt.text;B.urlencoded=tt.urlencoded;var In=["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"];In.forEach(function(t){Object.defineProperty(B,t,{get:function(){throw new Error("Most middleware (like "+t+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})})});var kt=Z((Qa,Sr)=>{"use strict";Sr.exports=Tr()});var Fa={};At(Fa,{log:()=>lt});module.exports=rs(Fa);var dt=le(kt(),1);var Ae=le(require("fs"),1),rt=le(require("path"),1),Tt=class{dataDir;warnings=[];panels=[];tickets=[];supportPoints=[];athkarSettings=[];blacklist=[];shortcuts=[];protectionSettings=[];nextIds={warnings:1,panels:1,tickets:1,athkarSettings:1,blacklist:1,shortcuts:1,protectionSettings:1};constructor(){this.dataDir=rt.default.resolve(process.cwd(),"data"),Ae.default.existsSync(this.dataDir)||Ae.default.mkdirSync(this.dataDir),this.loadData()}loadData(){["warnings.json","panels.json","tickets.json","supportPoints.json","athkarSettings.json","blacklist.json","shortcuts.json","protectionSettings.json"].forEach(r=>{let s=rt.default.join(this.dataDir,r),n=r.replace(".json","");if(Ae.default.existsSync(s)){let a=Ae.default.readFileSync(s,"utf-8");if(this[n]=JSON.parse(a),Array.isArray(this[n])){let o=this[n].reduce((i,u)=>Math.max(i,u.id||0),0);this.nextIds[n]=o+1}}})}saveData(e){let r=rt.default.join(this.dataDir,`${e}.json`);Ae.default.writeFileSync(r,JSON.stringify(this[e],null,2))}async createWarning(e){let r={...e,id:this.nextIds.warnings++,createdAt:new Date};return this.warnings.push(r),this.saveData("warnings"),r}async getWarnings(e){return e?this.warnings.filter(r=>r.userId===e).sort((r,s)=>s.createdAt.getTime()-r.createdAt.getTime()):[...this.warnings].sort((r,s)=>s.createdAt.getTime()-r.createdAt.getTime())}async deleteWarning(e){this.warnings=this.warnings.filter(r=>r.id!==e),this.saveData("warnings")}async createPanel(e){let r={...e,id:this.nextIds.panels++,buttonName:e.buttonName||null,buttonEmoji:e.buttonEmoji||null,welcomeMessage:e.welcomeMessage||null,supportRoles:e.supportRoles||null,categoryId:e.categoryId||null,imageUrl:e.imageUrl||null,ticketWelcomeImageUrl:e.ticketWelcomeImageUrl||null};return this.panels.push(r),this.saveData("panels"),r}async getPanel(e){return this.panels.find(r=>r.id===e)}async getPanels(){return this.panels}async getStats(){return{warningCount:this.warnings.length,panelCount:this.panels.length,ticketCount:this.tickets.length}}async createTicket(e){let r={...e,id:this.nextIds.tickets++,claimedBy:e.claimedBy||null,panelId:e.panelId||null,pointsAwarded:e.pointsAwarded||!1,createdAt:new Date};return this.tickets.push(r),this.saveData("tickets"),r}async getTicketByChannel(e){return this.tickets.find(r=>r.channelId===e)}async getOpenTicketsByUser(e){return this.tickets.filter(r=>r.creatorId===e)}async deleteTicketByChannel(e){let r=this.tickets.findIndex(s=>s.channelId===e);r!==-1&&(this.tickets.splice(r,1),this.saveData("tickets"))}async updateTicket(e,r){let s=this.tickets.findIndex(n=>n.id===e);if(s===-1)throw new Error("Ticket not found");return this.tickets[s]={...this.tickets[s],...r},this.saveData("tickets"),this.tickets[s]}async getSupportPoints(e){let r=this.supportPoints.find(s=>s.userId===e);return r?r.points:0}async addSupportPoint(e){let r=this.supportPoints.findIndex(s=>s.userId===e);r===-1?this.supportPoints.push({userId:e,points:1}):this.supportPoints[r].points+=1,this.saveData("supportPoints")}async setAthkarChannel(e,r){this.athkarSettings=this.athkarSettings.filter(s=>s.guildId!==r),this.athkarSettings.push({id:this.nextIds.athkarSettings++,channelId:e,guildId:r,isEnabled:!0}),this.saveData("athkarSettings")}async getAthkarChannels(){return this.athkarSettings.filter(e=>e.isEnabled).map(e=>e.channelId)}async setBlacklist(e,r){this.blacklist=this.blacklist.filter(s=>s.guildId!==e),this.blacklist.push({id:this.nextIds.blacklist++,guildId:e,words:r}),this.saveData("blacklist")}async getBlacklist(e){let r=this.blacklist.find(s=>s.guildId===e);return r?r.words:[]}async setShortcut(e,r,s,n){this.shortcuts=this.shortcuts.filter(a=>!(a.guildId===e&&a.shortcut===r)),this.shortcuts.push({id:this.nextIds.shortcuts++,guildId:e,shortcut:r,command:s,restrictions:n}),this.saveData("shortcuts")}async getShortcuts(e){return this.shortcuts.filter(r=>r.guildId===e)}async setProtectionSetting(e,r,s){let n=this.protectionSettings.find(a=>a.guildId===e);n||(n={id:this.nextIds.protectionSettings++,guildId:e,words:!1,links:!1,spam:!1},this.protectionSettings.push(n)),n[r]=s,this.saveData("protectionSettings")}async getProtectionSettings(e){let r=this.protectionSettings.find(s=>s.guildId===e);return r?{words:r.words,links:r.links,spam:r.spam}:{words:!1,links:!1,spam:!1}}},y=new Tt;var D={};At(D,{BRAND:()=>Qn,DIRTY:()=>pe,EMPTY_PATH:()=>Pn,INVALID:()=>v,NEVER:()=>qa,OK:()=>M,ParseStatus:()=>E,Schema:()=>x,ZodAny:()=>oe,ZodArray:()=>se,ZodBigInt:()=>he,ZodBoolean:()=>me,ZodBranded:()=>We,ZodCatch:()=>Ce,ZodDate:()=>ge,ZodDefault:()=>Se,ZodDiscriminatedUnion:()=>at,ZodEffects:()=>H,ZodEnum:()=>ke,ZodError:()=>L,ZodFirstPartyTypeKind:()=>w,ZodFunction:()=>ot,ZodIntersection:()=>_e,ZodIssueCode:()=>d,ZodLazy:()=>be,ZodLiteral:()=>xe,ZodMap:()=>$e,ZodNaN:()=>Le,ZodNativeEnum:()=>Te,ZodNever:()=>Y,ZodNull:()=>ve,ZodNullable:()=>Q,ZodNumber:()=>fe,ZodObject:()=>U,ZodOptional:()=>z,ZodParsedType:()=>h,ZodPipeline:()=>He,ZodPromise:()=>ue,ZodReadonly:()=>Ie,ZodRecord:()=>it,ZodSchema:()=>x,ZodSet:()=>Be,ZodString:()=>ie,ZodSymbol:()=>De,ZodTransformer:()=>H,ZodTuple:()=>K,ZodType:()=>x,ZodUndefined:()=>ye,ZodUnion:()=>we,ZodUnknown:()=>re,ZodVoid:()=>qe,addIssueToContext:()=>f,any:()=>ua,array:()=>pa,bigint:()=>sa,boolean:()=>Dr,coerce:()=>Da,custom:()=>Nr,date:()=>na,datetimeRegex:()=>Pr,defaultErrorMap:()=>ee,discriminatedUnion:()=>ga,effect:()=>Oa,enum:()=>Sa,function:()=>xa,getErrorMap:()=>Ne,getParsedType:()=>X,instanceof:()=>ta,intersection:()=>ya,isAborted:()=>st,isAsync:()=>Ee,isDirty:()=>nt,isValid:()=>ae,late:()=>ea,lazy:()=>ka,literal:()=>Ta,makeIssue:()=>ze,map:()=>_a,nan:()=>ra,nativeEnum:()=>Ca,never:()=>la,null:()=>oa,nullable:()=>ja,number:()=>Mr,object:()=>fa,objectUtil:()=>St,oboolean:()=>Ma,onumber:()=>Ea,optional:()=>Ra,ostring:()=>Na,pipeline:()=>Aa,preprocess:()=>Pa,promise:()=>Ia,quotelessJson:()=>On,record:()=>wa,set:()=>ba,setErrorMap:()=>jn,strictObject:()=>ha,string:()=>Er,symbol:()=>aa,transformer:()=>Oa,tuple:()=>va,undefined:()=>ia,union:()=>ma,unknown:()=>ca,util:()=>k,void:()=>da});var k;(function(t){t.assertEqual=n=>{};function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{let a={};for(let o of n)a[o]=o;return a},t.getValidEnumValues=n=>{let a=t.objectKeys(n).filter(i=>typeof n[n[i]]!="number"),o={};for(let i of a)o[i]=n[i];return t.objectValues(o)},t.objectValues=n=>t.objectKeys(n).map(function(a){return n[a]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let a=[];for(let o in n)Object.prototype.hasOwnProperty.call(n,o)&&a.push(o);return a},t.find=(n,a)=>{for(let o of n)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function s(n,a=" | "){return n.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=s,t.jsonStringifyReplacer=(n,a)=>typeof a=="bigint"?a.toString():a})(k||(k={}));var St;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(St||(St={}));var h=k.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),X=t=>{switch(typeof t){case"undefined":return h.undefined;case"string":return h.string;case"number":return Number.isNaN(t)?h.nan:h.number;case"boolean":return h.boolean;case"function":return h.function;case"bigint":return h.bigint;case"symbol":return h.symbol;case"object":return Array.isArray(t)?h.array:t===null?h.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?h.promise:typeof Map<"u"&&t instanceof Map?h.map:typeof Set<"u"&&t instanceof Set?h.set:typeof Date<"u"&&t instanceof Date?h.date:h.object;default:return h.unknown}};var d=k.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),On=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),L=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(a){return a.message},s={_errors:[]},n=a=>{for(let o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(n);else if(o.code==="invalid_return_type")n(o.returnTypeError);else if(o.code==="invalid_arguments")n(o.argumentsError);else if(o.path.length===0)s._errors.push(r(o));else{let i=s,u=0;for(;u<o.path.length;){let c=o.path[u];u===o.path.length-1?(i[c]=i[c]||{_errors:[]},i[c]._errors.push(r(o))):i[c]=i[c]||{_errors:[]},i=i[c],u++}}};return n(this),s}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,k.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},s=[];for(let n of this.issues)if(n.path.length>0){let a=n.path[0];r[a]=r[a]||[],r[a].push(e(n))}else s.push(e(n));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}};L.create=t=>new L(t);var Rn=(t,e)=>{let r;switch(t.code){case d.invalid_type:t.received===h.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case d.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,k.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:r=`Unrecognized key(s) in object: ${k.joinValues(t.keys,", ")}`;break;case d.invalid_union:r="Invalid input";break;case d.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${k.joinValues(t.options)}`;break;case d.invalid_enum_value:r=`Invalid enum value. Expected ${k.joinValues(t.options)}, received '${t.received}'`;break;case d.invalid_arguments:r="Invalid function arguments";break;case d.invalid_return_type:r="Invalid function return type";break;case d.invalid_date:r="Invalid date";break;case d.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:k.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case d.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case d.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case d.custom:r="Invalid input";break;case d.invalid_intersection_types:r="Intersection results could not be merged";break;case d.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case d.not_finite:r="Number must be finite";break;default:r=e.defaultError,k.assertNever(t)}return{message:r}},ee=Rn;var Cr=ee;function jn(t){Cr=t}function Ne(){return Cr}var ze=t=>{let{data:e,path:r,errorMaps:s,issueData:n}=t,a=[...r,...n.path||[]],o={...n,path:a};if(n.message!==void 0)return{...n,path:a,message:n.message};let i="",u=s.filter(c=>!!c).slice().reverse();for(let c of u)i=c(o,{data:e,defaultError:i}).message;return{...n,path:a,message:i}},Pn=[];function f(t,e){let r=Ne(),s=ze({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===ee?void 0:ee].filter(n=>!!n)});t.common.issues.push(s)}var E=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let s=[];for(let n of r){if(n.status==="aborted")return v;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,r){let s=[];for(let n of r){let a=await n.key,o=await n.value;s.push({key:a,value:o})}return t.mergeObjectSync(e,s)}static mergeObjectSync(e,r){let s={};for(let n of r){let{key:a,value:o}=n;if(a.status==="aborted"||o.status==="aborted")return v;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||n.alwaysSet)&&(s[a.value]=o.value)}return{status:e.value,value:s}}},v=Object.freeze({status:"aborted"}),pe=t=>({status:"dirty",value:t}),M=t=>({status:"valid",value:t}),st=t=>t.status==="aborted",nt=t=>t.status==="dirty",ae=t=>t.status==="valid",Ee=t=>typeof Promise<"u"&&t instanceof Promise;var g;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(g||(g={}));var W=class{constructor(e,r,s,n){this._cachedPath=[],this.parent=e,this.data=r,this._path=s,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Ir=(t,e)=>{if(ae(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new L(t.common.issues);return this._error=r,this._error}}};function _(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:s,description:n}=t;if(e&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(o,i)=>{let{message:u}=t;return o.code==="invalid_enum_value"?{message:u??i.defaultError}:typeof i.data>"u"?{message:u??s??i.defaultError}:o.code!=="invalid_type"?{message:i.defaultError}:{message:u??r??i.defaultError}},description:n}}var x=class{get description(){return this._def.description}_getType(e){return X(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:X(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new E,ctx:{common:e.parent.common,data:e.data,parsedType:X(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Ee(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let s=this.safeParse(e,r);if(s.success)return s.data;throw s.error}safeParse(e,r){let s={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:X(e)},n=this._parseSync({data:e,path:s.path,parent:s});return Ir(s,n)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:X(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:r});return ae(s)?{value:s.value}:{issues:r.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(s=>ae(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(e,r){let s=await this.safeParseAsync(e,r);if(s.success)return s.data;throw s.error}async safeParseAsync(e,r){let s={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:X(e)},n=this._parse({data:e,path:s.path,parent:s}),a=await(Ee(n)?n:Promise.resolve(n));return Ir(s,a)}refine(e,r){let s=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,a)=>{let o=e(n),i=()=>a.addIssue({code:d.custom,...s(n)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(i(),!1)):o?!0:(i(),!1)})}refinement(e,r){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof r=="function"?r(s,n):r),!1))}_refinement(e){return new H({schema:this,typeName:w.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return z.create(this,this._def)}nullable(){return Q.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return se.create(this)}promise(){return ue.create(this,this._def)}or(e){return we.create([this,e],this._def)}and(e){return _e.create(this,e,this._def)}transform(e){return new H({..._(this._def),schema:this,typeName:w.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Se({..._(this._def),innerType:this,defaultValue:r,typeName:w.ZodDefault})}brand(){return new We({typeName:w.ZodBranded,type:this,..._(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ce({..._(this._def),innerType:this,catchValue:r,typeName:w.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return He.create(this,e)}readonly(){return Ie.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},An=/^c[^\s-]{8,}$/i,Nn=/^[0-9a-z]+$/,En=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Mn=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Dn=/^[a-z0-9_-]{21}$/i,qn=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,$n=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Bn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ln="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ct,Un=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Fn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Vn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Zn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,zn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Wn=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Rr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Hn=new RegExp(`^${Rr}$`);function jr(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Gn(t){return new RegExp(`^${jr(t)}$`)}function Pr(t){let e=`${Rr}T${jr(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Jn(t,e){return!!((e==="v4"||!e)&&Un.test(t)||(e==="v6"||!e)&&Vn.test(t))}function Yn(t,e){if(!qn.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(s));return!(typeof n!="object"||n===null||"typ"in n&&n?.typ!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function Xn(t,e){return!!((e==="v4"||!e)&&Fn.test(t)||(e==="v6"||!e)&&Zn.test(t))}var ie=class t extends x{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==h.string){let a=this._getOrReturnCtx(e);return f(a,{code:d.invalid_type,expected:h.string,received:a.parsedType}),v}let s=new E,n;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),f(n,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),f(n,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){let o=e.data.length>a.value,i=e.data.length<a.value;(o||i)&&(n=this._getOrReturnCtx(e,n),o?f(n,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):i&&f(n,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")Bn.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"email",code:d.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")Ct||(Ct=new RegExp(Ln,"u")),Ct.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"emoji",code:d.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")Mn.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"uuid",code:d.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")Dn.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"nanoid",code:d.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")An.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"cuid",code:d.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")Nn.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"cuid2",code:d.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")En.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"ulid",code:d.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),f(n,{validation:"url",code:d.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"regex",code:d.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),f(n,{code:d.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),f(n,{code:d.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),f(n,{code:d.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?Pr(a).test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{code:d.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?Hn.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{code:d.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?Gn(a).test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{code:d.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?$n.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"duration",code:d.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?Jn(e.data,a.version)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"ip",code:d.invalid_string,message:a.message}),s.dirty()):a.kind==="jwt"?Yn(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"jwt",code:d.invalid_string,message:a.message}),s.dirty()):a.kind==="cidr"?Xn(e.data,a.version)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"cidr",code:d.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?zn.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"base64",code:d.invalid_string,message:a.message}),s.dirty()):a.kind==="base64url"?Wn.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"base64url",code:d.invalid_string,message:a.message}),s.dirty()):k.assertNever(a);return{status:s.value,value:e.data}}_regex(e,r,s){return this.refinement(n=>e.test(n),{validation:r,code:d.invalid_string,...g.errToObj(s)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...g.errToObj(e)})}url(e){return this._addCheck({kind:"url",...g.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...g.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...g.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...g.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...g.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...g.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...g.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...g.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...g.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...g.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...g.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...g.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...g.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...g.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...g.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...g.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...g.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...g.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...g.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...g.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...g.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...g.errToObj(r)})}nonempty(e){return this.min(1,g.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ie.create=t=>new ie({checks:[],typeName:w.ZodString,coerce:t?.coerce??!1,..._(t)});function Kn(t,e){let r=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=r>s?r:s,a=Number.parseInt(t.toFixed(n).replace(".","")),o=Number.parseInt(e.toFixed(n).replace(".",""));return a%o/10**n}var fe=class t extends x{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==h.number){let a=this._getOrReturnCtx(e);return f(a,{code:d.invalid_type,expected:h.number,received:a.parsedType}),v}let s,n=new E;for(let a of this._def.checks)a.kind==="int"?k.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{code:d.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:d.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:d.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="multipleOf"?Kn(e.data,a.value)!==0&&(s=this._getOrReturnCtx(e,s),f(s,{code:d.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{code:d.not_finite,message:a.message}),n.dirty()):k.assertNever(a);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,g.toString(r))}gt(e,r){return this.setLimit("min",e,!1,g.toString(r))}lte(e,r){return this.setLimit("max",e,!0,g.toString(r))}lt(e,r){return this.setLimit("max",e,!1,g.toString(r))}setLimit(e,r,s,n){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:g.toString(n)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:g.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:g.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:g.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:g.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:g.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&k.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(r)&&Number.isFinite(e)}};fe.create=t=>new fe({checks:[],typeName:w.ZodNumber,coerce:t?.coerce||!1,..._(t)});var he=class t extends x{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==h.bigint)return this._getInvalidInput(e);let s,n=new E;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:d.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:d.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),f(s,{code:d.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):k.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return f(r,{code:d.invalid_type,expected:h.bigint,received:r.parsedType}),v}gte(e,r){return this.setLimit("min",e,!0,g.toString(r))}gt(e,r){return this.setLimit("min",e,!1,g.toString(r))}lte(e,r){return this.setLimit("max",e,!0,g.toString(r))}lt(e,r){return this.setLimit("max",e,!1,g.toString(r))}setLimit(e,r,s,n){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:g.toString(n)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:g.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};he.create=t=>new he({checks:[],typeName:w.ZodBigInt,coerce:t?.coerce??!1,..._(t)});var me=class extends x{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==h.boolean){let s=this._getOrReturnCtx(e);return f(s,{code:d.invalid_type,expected:h.boolean,received:s.parsedType}),v}return M(e.data)}};me.create=t=>new me({typeName:w.ZodBoolean,coerce:t?.coerce||!1,..._(t)});var ge=class t extends x{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==h.date){let a=this._getOrReturnCtx(e);return f(a,{code:d.invalid_type,expected:h.date,received:a.parsedType}),v}if(Number.isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return f(a,{code:d.invalid_date}),v}let s=new E,n;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),f(n,{code:d.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),f(n,{code:d.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):k.assertNever(a);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:g.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:g.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ge.create=t=>new ge({checks:[],coerce:t?.coerce||!1,typeName:w.ZodDate,..._(t)});var De=class extends x{_parse(e){if(this._getType(e)!==h.symbol){let s=this._getOrReturnCtx(e);return f(s,{code:d.invalid_type,expected:h.symbol,received:s.parsedType}),v}return M(e.data)}};De.create=t=>new De({typeName:w.ZodSymbol,..._(t)});var ye=class extends x{_parse(e){if(this._getType(e)!==h.undefined){let s=this._getOrReturnCtx(e);return f(s,{code:d.invalid_type,expected:h.undefined,received:s.parsedType}),v}return M(e.data)}};ye.create=t=>new ye({typeName:w.ZodUndefined,..._(t)});var ve=class extends x{_parse(e){if(this._getType(e)!==h.null){let s=this._getOrReturnCtx(e);return f(s,{code:d.invalid_type,expected:h.null,received:s.parsedType}),v}return M(e.data)}};ve.create=t=>new ve({typeName:w.ZodNull,..._(t)});var oe=class extends x{constructor(){super(...arguments),this._any=!0}_parse(e){return M(e.data)}};oe.create=t=>new oe({typeName:w.ZodAny,..._(t)});var re=class extends x{constructor(){super(...arguments),this._unknown=!0}_parse(e){return M(e.data)}};re.create=t=>new re({typeName:w.ZodUnknown,..._(t)});var Y=class extends x{_parse(e){let r=this._getOrReturnCtx(e);return f(r,{code:d.invalid_type,expected:h.never,received:r.parsedType}),v}};Y.create=t=>new Y({typeName:w.ZodNever,..._(t)});var qe=class extends x{_parse(e){if(this._getType(e)!==h.undefined){let s=this._getOrReturnCtx(e);return f(s,{code:d.invalid_type,expected:h.void,received:s.parsedType}),v}return M(e.data)}};qe.create=t=>new qe({typeName:w.ZodVoid,..._(t)});var se=class t extends x{_parse(e){let{ctx:r,status:s}=this._processInputParams(e),n=this._def;if(r.parsedType!==h.array)return f(r,{code:d.invalid_type,expected:h.array,received:r.parsedType}),v;if(n.exactLength!==null){let o=r.data.length>n.exactLength.value,i=r.data.length<n.exactLength.value;(o||i)&&(f(r,{code:o?d.too_big:d.too_small,minimum:i?n.exactLength.value:void 0,maximum:o?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(f(r,{code:d.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(f(r,{code:d.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((o,i)=>n.type._parseAsync(new W(r,o,r.path,i)))).then(o=>E.mergeArray(s,o));let a=[...r.data].map((o,i)=>n.type._parseSync(new W(r,o,r.path,i)));return E.mergeArray(s,a)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:g.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:g.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:g.toString(r)}})}nonempty(e){return this.min(1,e)}};se.create=(t,e)=>new se({type:t,minLength:null,maxLength:null,exactLength:null,typeName:w.ZodArray,..._(e)});function Me(t){if(t instanceof U){let e={};for(let r in t.shape){let s=t.shape[r];e[r]=z.create(Me(s))}return new U({...t._def,shape:()=>e})}else return t instanceof se?new se({...t._def,type:Me(t.element)}):t instanceof z?z.create(Me(t.unwrap())):t instanceof Q?Q.create(Me(t.unwrap())):t instanceof K?K.create(t.items.map(e=>Me(e))):t}var U=class t extends x{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=k.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==h.object){let c=this._getOrReturnCtx(e);return f(c,{code:d.invalid_type,expected:h.object,received:c.parsedType}),v}let{status:s,ctx:n}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof Y&&this._def.unknownKeys==="strip"))for(let c in n.data)o.includes(c)||i.push(c);let u=[];for(let c of o){let p=a[c],m=n.data[c];u.push({key:{status:"valid",value:c},value:p._parse(new W(n,m,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof Y){let c=this._def.unknownKeys;if(c==="passthrough")for(let p of i)u.push({key:{status:"valid",value:p},value:{status:"valid",value:n.data[p]}});else if(c==="strict")i.length>0&&(f(n,{code:d.unrecognized_keys,keys:i}),s.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let p of i){let m=n.data[p];u.push({key:{status:"valid",value:p},value:c._parse(new W(n,m,n.path,p)),alwaysSet:p in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let c=[];for(let p of u){let m=await p.key,I=await p.value;c.push({key:m,value:I,alwaysSet:p.alwaysSet})}return c}).then(c=>E.mergeObjectSync(s,c)):E.mergeObjectSync(s,u)}get shape(){return this._def.shape()}strict(e){return g.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,s)=>{let n=this._def.errorMap?.(r,s).message??s.defaultError;return r.code==="unrecognized_keys"?{message:g.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:w.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let s of k.objectKeys(e))e[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let s of k.objectKeys(this.shape))e[s]||(r[s]=this.shape[s]);return new t({...this._def,shape:()=>r})}deepPartial(){return Me(this)}partial(e){let r={};for(let s of k.objectKeys(this.shape)){let n=this.shape[s];e&&!e[s]?r[s]=n:r[s]=n.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let s of k.objectKeys(this.shape))if(e&&!e[s])r[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof z;)a=a._def.innerType;r[s]=a}return new t({...this._def,shape:()=>r})}keyof(){return Ar(k.objectKeys(this.shape))}};U.create=(t,e)=>new U({shape:()=>t,unknownKeys:"strip",catchall:Y.create(),typeName:w.ZodObject,..._(e)});U.strictCreate=(t,e)=>new U({shape:()=>t,unknownKeys:"strict",catchall:Y.create(),typeName:w.ZodObject,..._(e)});U.lazycreate=(t,e)=>new U({shape:t,unknownKeys:"strip",catchall:Y.create(),typeName:w.ZodObject,..._(e)});var we=class extends x{_parse(e){let{ctx:r}=this._processInputParams(e),s=this._def.options;function n(a){for(let i of a)if(i.result.status==="valid")return i.result;for(let i of a)if(i.result.status==="dirty")return r.common.issues.push(...i.ctx.common.issues),i.result;let o=a.map(i=>new L(i.ctx.common.issues));return f(r,{code:d.invalid_union,unionErrors:o}),v}if(r.common.async)return Promise.all(s.map(async a=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(n);{let a,o=[];for(let u of s){let c={...r,common:{...r.common,issues:[]},parent:null},p=u._parseSync({data:r.data,path:r.path,parent:c});if(p.status==="valid")return p;p.status==="dirty"&&!a&&(a={result:p,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let i=o.map(u=>new L(u));return f(r,{code:d.invalid_union,unionErrors:i}),v}}get options(){return this._def.options}};we.create=(t,e)=>new we({options:t,typeName:w.ZodUnion,..._(e)});var te=t=>t instanceof be?te(t.schema):t instanceof H?te(t.innerType()):t instanceof xe?[t.value]:t instanceof ke?t.options:t instanceof Te?k.objectValues(t.enum):t instanceof Se?te(t._def.innerType):t instanceof ye?[void 0]:t instanceof ve?[null]:t instanceof z?[void 0,...te(t.unwrap())]:t instanceof Q?[null,...te(t.unwrap())]:t instanceof We||t instanceof Ie?te(t.unwrap()):t instanceof Ce?te(t._def.innerType):[],at=class t extends x{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==h.object)return f(r,{code:d.invalid_type,expected:h.object,received:r.parsedType}),v;let s=this.discriminator,n=r.data[s],a=this.optionsMap.get(n);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(f(r,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),v)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,s){let n=new Map;for(let a of r){let o=te(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of o){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,a)}}return new t({typeName:w.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n,..._(s)})}};function It(t,e){let r=X(t),s=X(e);if(t===e)return{valid:!0,data:t};if(r===h.object&&s===h.object){let n=k.objectKeys(e),a=k.objectKeys(t).filter(i=>n.indexOf(i)!==-1),o={...t,...e};for(let i of a){let u=It(t[i],e[i]);if(!u.valid)return{valid:!1};o[i]=u.data}return{valid:!0,data:o}}else if(r===h.array&&s===h.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let a=0;a<t.length;a++){let o=t[a],i=e[a],u=It(o,i);if(!u.valid)return{valid:!1};n.push(u.data)}return{valid:!0,data:n}}else return r===h.date&&s===h.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var _e=class extends x{_parse(e){let{status:r,ctx:s}=this._processInputParams(e),n=(a,o)=>{if(st(a)||st(o))return v;let i=It(a.value,o.value);return i.valid?((nt(a)||nt(o))&&r.dirty(),{status:r.value,value:i.data}):(f(s,{code:d.invalid_intersection_types}),v)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,o])=>n(a,o)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};_e.create=(t,e,r)=>new _e({left:t,right:e,typeName:w.ZodIntersection,..._(r)});var K=class t extends x{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==h.array)return f(s,{code:d.invalid_type,expected:h.array,received:s.parsedType}),v;if(s.data.length<this._def.items.length)return f(s,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),v;!this._def.rest&&s.data.length>this._def.items.length&&(f(s,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...s.data].map((o,i)=>{let u=this._def.items[i]||this._def.rest;return u?u._parse(new W(s,o,s.path,i)):null}).filter(o=>!!o);return s.common.async?Promise.all(a).then(o=>E.mergeArray(r,o)):E.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};K.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new K({items:t,typeName:w.ZodTuple,rest:null,..._(e)})};var it=class t extends x{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==h.object)return f(s,{code:d.invalid_type,expected:h.object,received:s.parsedType}),v;let n=[],a=this._def.keyType,o=this._def.valueType;for(let i in s.data)n.push({key:a._parse(new W(s,i,s.path,i)),value:o._parse(new W(s,s.data[i],s.path,i)),alwaysSet:i in s.data});return s.common.async?E.mergeObjectAsync(r,n):E.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,s){return r instanceof x?new t({keyType:e,valueType:r,typeName:w.ZodRecord,..._(s)}):new t({keyType:ie.create(),valueType:e,typeName:w.ZodRecord,..._(r)})}},$e=class extends x{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==h.map)return f(s,{code:d.invalid_type,expected:h.map,received:s.parsedType}),v;let n=this._def.keyType,a=this._def.valueType,o=[...s.data.entries()].map(([i,u],c)=>({key:n._parse(new W(s,i,s.path,[c,"key"])),value:a._parse(new W(s,u,s.path,[c,"value"]))}));if(s.common.async){let i=new Map;return Promise.resolve().then(async()=>{for(let u of o){let c=await u.key,p=await u.value;if(c.status==="aborted"||p.status==="aborted")return v;(c.status==="dirty"||p.status==="dirty")&&r.dirty(),i.set(c.value,p.value)}return{status:r.value,value:i}})}else{let i=new Map;for(let u of o){let c=u.key,p=u.value;if(c.status==="aborted"||p.status==="aborted")return v;(c.status==="dirty"||p.status==="dirty")&&r.dirty(),i.set(c.value,p.value)}return{status:r.value,value:i}}}};$e.create=(t,e,r)=>new $e({valueType:e,keyType:t,typeName:w.ZodMap,..._(r)});var Be=class t extends x{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==h.set)return f(s,{code:d.invalid_type,expected:h.set,received:s.parsedType}),v;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(f(s,{code:d.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(f(s,{code:d.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let a=this._def.valueType;function o(u){let c=new Set;for(let p of u){if(p.status==="aborted")return v;p.status==="dirty"&&r.dirty(),c.add(p.value)}return{status:r.value,value:c}}let i=[...s.data.values()].map((u,c)=>a._parse(new W(s,u,s.path,c)));return s.common.async?Promise.all(i).then(u=>o(u)):o(i)}min(e,r){return new t({...this._def,minSize:{value:e,message:g.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:g.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Be.create=(t,e)=>new Be({valueType:t,minSize:null,maxSize:null,typeName:w.ZodSet,..._(e)});var ot=class t extends x{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==h.function)return f(r,{code:d.invalid_type,expected:h.function,received:r.parsedType}),v;function s(i,u){return ze({data:i,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ne(),ee].filter(c=>!!c),issueData:{code:d.invalid_arguments,argumentsError:u}})}function n(i,u){return ze({data:i,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ne(),ee].filter(c=>!!c),issueData:{code:d.invalid_return_type,returnTypeError:u}})}let a={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof ue){let i=this;return M(async function(...u){let c=new L([]),p=await i._def.args.parseAsync(u,a).catch(T=>{throw c.addIssue(s(u,T)),c}),m=await Reflect.apply(o,this,p);return await i._def.returns._def.type.parseAsync(m,a).catch(T=>{throw c.addIssue(n(m,T)),c})})}else{let i=this;return M(function(...u){let c=i._def.args.safeParse(u,a);if(!c.success)throw new L([s(u,c.error)]);let p=Reflect.apply(o,this,c.data),m=i._def.returns.safeParse(p,a);if(!m.success)throw new L([n(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:K.create(e).rest(re.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,s){return new t({args:e||K.create([]).rest(re.create()),returns:r||re.create(),typeName:w.ZodFunction,..._(s)})}},be=class extends x{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};be.create=(t,e)=>new be({getter:t,typeName:w.ZodLazy,..._(e)});var xe=class extends x{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return f(r,{received:r.data,code:d.invalid_literal,expected:this._def.value}),v}return{status:"valid",value:e.data}}get value(){return this._def.value}};xe.create=(t,e)=>new xe({value:t,typeName:w.ZodLiteral,..._(e)});function Ar(t,e){return new ke({values:t,typeName:w.ZodEnum,..._(e)})}var ke=class t extends x{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),s=this._def.values;return f(r,{expected:k.joinValues(s),received:r.parsedType,code:d.invalid_type}),v}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),s=this._def.values;return f(r,{received:r.data,code:d.invalid_enum_value,options:s}),v}return M(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(s=>!e.includes(s)),{...this._def,...r})}};ke.create=Ar;var Te=class extends x{_parse(e){let r=k.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==h.string&&s.parsedType!==h.number){let n=k.objectValues(r);return f(s,{expected:k.joinValues(n),received:s.parsedType,code:d.invalid_type}),v}if(this._cache||(this._cache=new Set(k.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let n=k.objectValues(r);return f(s,{received:s.data,code:d.invalid_enum_value,options:n}),v}return M(e.data)}get enum(){return this._def.values}};Te.create=(t,e)=>new Te({values:t,typeName:w.ZodNativeEnum,..._(e)});var ue=class extends x{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==h.promise&&r.common.async===!1)return f(r,{code:d.invalid_type,expected:h.promise,received:r.parsedType}),v;let s=r.parsedType===h.promise?r.data:Promise.resolve(r.data);return M(s.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};ue.create=(t,e)=>new ue({type:t,typeName:w.ZodPromise,..._(e)});var H=class extends x{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===w.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:s}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:o=>{f(s,o),o.fatal?r.abort():r.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),n.type==="preprocess"){let o=n.transform(s.data,a);if(s.common.async)return Promise.resolve(o).then(async i=>{if(r.value==="aborted")return v;let u=await this._def.schema._parseAsync({data:i,path:s.path,parent:s});return u.status==="aborted"?v:u.status==="dirty"?pe(u.value):r.value==="dirty"?pe(u.value):u});{if(r.value==="aborted")return v;let i=this._def.schema._parseSync({data:o,path:s.path,parent:s});return i.status==="aborted"?v:i.status==="dirty"?pe(i.value):r.value==="dirty"?pe(i.value):i}}if(n.type==="refinement"){let o=i=>{let u=n.refinement(i,a);if(s.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(s.common.async===!1){let i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?v:(i.status==="dirty"&&r.dirty(),o(i.value),{status:r.value,value:i.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>i.status==="aborted"?v:(i.status==="dirty"&&r.dirty(),o(i.value).then(()=>({status:r.value,value:i.value}))))}if(n.type==="transform")if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ae(o))return v;let i=n.transform(o.value,a);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:i}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>ae(o)?Promise.resolve(n.transform(o.value,a)).then(i=>({status:r.value,value:i})):v);k.assertNever(n)}};H.create=(t,e,r)=>new H({schema:t,typeName:w.ZodEffects,effect:e,..._(r)});H.createWithPreprocess=(t,e,r)=>new H({schema:e,effect:{type:"preprocess",transform:t},typeName:w.ZodEffects,..._(r)});var z=class extends x{_parse(e){return this._getType(e)===h.undefined?M(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};z.create=(t,e)=>new z({innerType:t,typeName:w.ZodOptional,..._(e)});var Q=class extends x{_parse(e){return this._getType(e)===h.null?M(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Q.create=(t,e)=>new Q({innerType:t,typeName:w.ZodNullable,..._(e)});var Se=class extends x{_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return r.parsedType===h.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Se.create=(t,e)=>new Se({innerType:t,typeName:w.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,..._(e)});var Ce=class extends x{_parse(e){let{ctx:r}=this._processInputParams(e),s={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ee(n)?n.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new L(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new L(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Ce.create=(t,e)=>new Ce({innerType:t,typeName:w.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,..._(e)});var Le=class extends x{_parse(e){if(this._getType(e)!==h.nan){let s=this._getOrReturnCtx(e);return f(s,{code:d.invalid_type,expected:h.nan,received:s.parsedType}),v}return{status:"valid",value:e.data}}};Le.create=t=>new Le({typeName:w.ZodNaN,..._(t)});var Qn=Symbol("zod_brand"),We=class extends x{_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}},He=class t extends x{_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?v:a.status==="dirty"?(r.dirty(),pe(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?v:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,r){return new t({in:e,out:r,typeName:w.ZodPipeline})}},Ie=class extends x{_parse(e){let r=this._def.innerType._parse(e),s=n=>(ae(n)&&(n.value=Object.freeze(n.value)),n);return Ee(r)?r.then(n=>s(n)):s(r)}unwrap(){return this._def.innerType}};Ie.create=(t,e)=>new Ie({innerType:t,typeName:w.ZodReadonly,..._(e)});function Or(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function Nr(t,e={},r){return t?oe.create().superRefine((s,n)=>{let a=t(s);if(a instanceof Promise)return a.then(o=>{if(!o){let i=Or(e,s),u=i.fatal??r??!0;n.addIssue({code:"custom",...i,fatal:u})}});if(!a){let o=Or(e,s),i=o.fatal??r??!0;n.addIssue({code:"custom",...o,fatal:i})}}):oe.create()}var ea={object:U.lazycreate},w;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(w||(w={}));var ta=(t,e={message:`Input not instance of ${t.name}`})=>Nr(r=>r instanceof t,e),Er=ie.create,Mr=fe.create,ra=Le.create,sa=he.create,Dr=me.create,na=ge.create,aa=De.create,ia=ye.create,oa=ve.create,ua=oe.create,ca=re.create,la=Y.create,da=qe.create,pa=se.create,fa=U.create,ha=U.strictCreate,ma=we.create,ga=at.create,ya=_e.create,va=K.create,wa=it.create,_a=$e.create,ba=Be.create,xa=ot.create,ka=be.create,Ta=xe.create,Sa=ke.create,Ca=Te.create,Ia=ue.create,Oa=H.create,Ra=z.create,ja=Q.create,Pa=H.createWithPreprocess,Aa=He.create,Na=()=>Er().optional(),Ea=()=>Mr().optional(),Ma=()=>Dr().optional(),Da={string:(t=>ie.create({...t,coerce:!0})),number:(t=>fe.create({...t,coerce:!0})),boolean:(t=>me.create({...t,coerce:!0})),bigint:(t=>he.create({...t,coerce:!0})),date:(t=>ge.create({...t,coerce:!0}))};var qa=v;var Oi={validation:D.object({message:D.string(),field:D.string().optional()}),notFound:D.object({message:D.string()}),internal:D.object({message:D.string()})},Ot={warnings:{list:{method:"GET",path:"/api/warnings",responses:{200:D.array(D.custom())}}},stats:{get:{method:"GET",path:"/api/stats",responses:{200:D.object({warningCount:D.number(),panelCount:D.number(),botStatus:D.enum(["online","offline"])})}}}};var l=require("discord.js");var ut=require("canvas"),Fr=le(require("moment-hijri"),1),Ue=new l.Client({intents:[l.GatewayIntentBits.Guilds,l.GatewayIntentBits.GuildMessages,l.GatewayIntentBits.MessageContent,l.GatewayIntentBits.GuildMembers]}),$a=[new l.SlashCommandBuilder().setName("timeout").setDescription("\u0625\u0639\u0637\u0627\u0621 \u062A\u0627\u064A\u0645 \u0627\u0648\u062A \u0644\u0634\u062E\u0635").addUserOption(t=>t.setName("user").setDescription("\u0627\u0644\u0634\u062E\u0635").setRequired(!0)).addStringOption(t=>t.setName("duration").setDescription("\u0627\u0644\u0645\u062F\u0629 (\u0645\u062B\u0644\u0627\u064B 1m, 1h, 1d)").setRequired(!0)),new l.SlashCommandBuilder().setName("shortcuts").setDescription("\u0639\u0631\u0636 \u0627\u062E\u062A\u0635\u0627\u0631\u0627\u062A \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u062F\u0627\u0631\u064A\u0629"),new l.SlashCommandBuilder().setName("untimeout").setDescription("\u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u062A\u0627\u064A\u0645 \u0627\u0648\u062A \u0639\u0646 \u0634\u062E\u0635").addUserOption(t=>t.setName("user").setDescription("\u0627\u0644\u0634\u062E\u0635").setRequired(!0)),new l.SlashCommandBuilder().setName("warn").setDescription("\u062A\u062D\u0630\u064A\u0631 \u0634\u062E\u0635").addUserOption(t=>t.setName("user").setDescription("\u0627\u0644\u0634\u062E\u0635").setRequired(!0)).addStringOption(t=>t.setName("reason").setDescription("\u0627\u0644\u0633\u0628\u0628").setRequired(!0)),new l.SlashCommandBuilder().setName("unwarn").setDescription("\u0625\u0632\u0627\u0644\u0629 \u062A\u062D\u0630\u064A\u0631 \u0639\u0646 \u0634\u062E\u0635").addUserOption(t=>t.setName("user").setDescription("\u0627\u0644\u0634\u062E\u0635").setRequired(!0)),new l.SlashCommandBuilder().setName("warnings").setDescription("\u0639\u0631\u0636 \u062A\u062D\u0630\u064A\u0631\u0627\u062A \u0634\u062E\u0635").addUserOption(t=>t.setName("user").setDescription("\u0627\u0644\u0634\u062E\u0635").setRequired(!0)),new l.SlashCommandBuilder().setName("nick").setDescription("\u062A\u063A\u064A\u064A\u0631 \u0627\u0633\u0645 \u0634\u062E\u0635").addUserOption(t=>t.setName("user").setDescription("\u0627\u0644\u0634\u062E\u0635").setRequired(!0)).addStringOption(t=>t.setName("new_name").setDescription("\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u062C\u062F\u064A\u062F").setRequired(!0)),new l.SlashCommandBuilder().setName("lock").setDescription("\u0642\u0641\u0644 \u0627\u0644\u0631\u0648\u0645"),new l.SlashCommandBuilder().setName("unlock").setDescription("\u0641\u062A\u062D \u0627\u0644\u0631\u0648\u0645"),new l.SlashCommandBuilder().setName("ban").setDescription("\u062D\u0638\u0631 \u0634\u062E\u0635").addUserOption(t=>t.setName("user").setDescription("\u0627\u0644\u0634\u062E\u0635").setRequired(!0)),new l.SlashCommandBuilder().setName("unban").setDescription("\u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u062D\u0638\u0631 \u0639\u0646 \u0634\u062E\u0635").addUserOption(t=>t.setName("user").setDescription("\u0627\u0644\u0634\u062E\u0635").setRequired(!0)),new l.SlashCommandBuilder().setName("kick").setDescription("\u0637\u0631\u062F \u0634\u062E\u0635").addUserOption(t=>t.setName("user").setDescription("\u0627\u0644\u0634\u062E\u0635").setRequired(!0)),new l.SlashCommandBuilder().setName("ticket").setDescription("\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u062A\u0630\u0627\u0643\u0631").addSubcommand(t=>t.setName("points").setDescription("\u0639\u0631\u0636 \u0646\u0642\u0627\u0637 \u0634\u062E\u0635").addUserOption(e=>e.setName("user").setDescription("\u0627\u0644\u0634\u062E\u0635").setRequired(!0))),new l.SlashCommandBuilder().setName("panel").setDescription("\u0625\u0646\u0634\u0627\u0621 \u0628\u0627\u0646\u0644 \u062A\u0630\u0643\u0631\u0629").addStringOption(t=>t.setName("name").setDescription("\u0627\u0633\u0645 \u0627\u0644\u0628\u0627\u0646\u0644 (\u062F\u0627\u062E\u0644\u064A)").setRequired(!0)).addStringOption(t=>t.setName("title").setDescription("\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0627\u064A\u0645\u0628\u062F").setRequired(!0)).addStringOption(t=>t.setName("description").setDescription("\u0648\u0635\u0641 \u0627\u0644\u0627\u064A\u0645\u0628\u062F").setRequired(!0)).addStringOption(t=>t.setName("button_name").setDescription("\u0627\u0633\u0645 \u0627\u0644\u0632\u0631 \u0641\u064A \u0627\u0644\u0642\u0627\u0626\u0645\u0629").setRequired(!0)).addStringOption(t=>t.setName("welcome_message").setDescription("\u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062D\u064A\u0628 \u062F\u0627\u062E\u0644 \u0627\u0644\u062A\u0643\u062A").setRequired(!0)).addRoleOption(t=>t.setName("support_role").setDescription("\u0631\u062A\u0628\u0629 \u0627\u0644\u0645\u0634\u0631\u0641\u064A\u0646").setRequired(!0)).addChannelOption(t=>t.setName("category").setDescription("\u0643\u0627\u062A\u0627\u062C\u0648\u0631\u064A \u0641\u062A\u062D \u0627\u0644\u0631\u0648\u0645\u0627\u062A").addChannelTypes(l.ChannelType.GuildCategory).setRequired(!0)).addStringOption(t=>t.setName("emoji_button").setDescription("\u0627\u064A\u0645\u0648\u062C\u064A \u0627\u0644\u0632\u0631").setRequired(!1)).addAttachmentOption(t=>t.setName("image").setDescription("\u0635\u0648\u0631\u0629 \u0627\u0644\u0628\u0627\u0646\u0644 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629").setRequired(!1)).addAttachmentOption(t=>t.setName("ticket_image").setDescription("\u0635\u0648\u0631\u0629 \u062A\u0631\u062D\u064A\u0628 \u0627\u0644\u062A\u0643\u062A").setRequired(!1)),new l.SlashCommandBuilder().setName("athkar").setDescription("\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0623\u0630\u0643\u0627\u0631").addChannelOption(t=>t.setName("channel").setDescription("\u0627\u0644\u0642\u0646\u0627\u0629 \u0627\u0644\u062A\u064A \u0633\u064A\u062A\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0623\u0630\u0643\u0627\u0631 \u0641\u064A\u0647\u0627").addChannelTypes(l.ChannelType.GuildText).setRequired(!0)),new l.SlashCommandBuilder().setName("athkar_off").setDescription("\u0625\u064A\u0642\u0627\u0641 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0623\u0630\u0643\u0627\u0631 \u0641\u064A \u0627\u0644\u0633\u064A\u0631\u0641\u0631"),new l.SlashCommandBuilder().setName("protection").setDescription("\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u064A\u0631\u0641\u0631"),new l.SlashCommandBuilder().setName("send_panel").setDescription("\u0625\u0631\u0633\u0627\u0644 \u0628\u0627\u0646\u0644 \u062A\u0630\u0643\u0631\u0629")];async function Vr(){if(!process.env.DISCORD_TOKEN||!process.env.CLIENT_ID)throw new Error("Missing DISCORD_TOKEN or CLIENT_ID");let t=new l.REST({version:"10"}).setToken(process.env.DISCORD_TOKEN);try{console.log("Started refreshing application (/) commands."),await t.put(l.Routes.applicationCommands(process.env.CLIENT_ID),{body:$a}),console.log("Successfully reloaded application (/) commands.")}catch(s){console.error(s)}Ue.login(process.env.DISCORD_TOKEN);let e=new Map;Ue.on("messageCreate",async s=>{if(s.author.bot||!s.guild)return;let a=(await y.getShortcuts(s.guildId)).find(u=>s.content.startsWith(u.shortcut));if(a){let u=s.content.slice(a.shortcut.length).trim();s.reply(`\u062A\u0645 \u0631\u0635\u062F \u0627\u062E\u062A\u0635\u0627\u0631: ${a.command} ${u}`)}if((await y.getProtectionSettings(s.guildId)).spam){let u=Date.now(),c=e.get(s.author.id)||{count:0,lastMessage:0};if(u-c.lastMessage<3e3?c.count++:c.count=1,c.lastMessage=u,e.set(s.author.id,c),c.count>=5)try{await s.delete().catch(()=>{});let p=s.member||await s.guild.members.fetch(s.author.id);p&&p.moderatable&&await p.timeout(6e4,"NTL BOT Spam Protection").catch(()=>{});return}catch{}}if((await y.getProtectionSettings(s.guildId)).spam&&s.mentions.users.size>3){await s.delete();return}if(s.content==="+ping"){let u=await s.reply("\u062C\u0627\u0631\u064A \u062D\u0633\u0627\u0628 \u0633\u0631\u0639\u0629 \u0627\u0644\u0627\u0633\u062A\u062C\u0627\u0628\u0629..."),c=Math.random(),p;c<.1?p=40:p=Math.floor(Math.random()*11)+20;let m=Math.floor(Math.random()*11)+15;await u.edit(`**\u0633\u0631\u0639\u0629 \u0627\u0633\u062A\u062C\u0627\u0628\u0629 \u0627\u0644\u0628\u0648\u062A \u0647\u064A: \`${p}ms\` \u{1F3D3}**
**\u0633\u0631\u0639\u0629 \u0627\u0633\u062A\u062C\u0627\u0628\u0629 \u0628\u0648\u0627\u0628\u0629 \u0627\u0644\u062F\u064A\u0633\u0643\u0648\u0631\u062F: \`${m}ms\` \u{1F4E1}**`)}});let r=!0;setInterval(async()=>{r?await La():await Ua(),r=!r},900*1e3)}var qr=["\u0633\u0628\u062D\u0627\u0646 \u0627\u0644\u0644\u0647 \u0648\u0628\u062D\u0645\u062F\u0647\u060C \u0633\u0628\u062D\u0627\u0646 \u0627\u0644\u0644\u0647 \u0627\u0644\u0639\u0638\u064A\u0645","\u0644\u0627 \u0625\u0644\u0647 \u0625\u0644\u0627 \u0627\u0644\u0644\u0647 \u0648\u062D\u062F\u0647 \u0644\u0627 \u0634\u0631\u064A\u0643 \u0644\u0647\u060C \u0644\u0647 \u0627\u0644\u0645\u0644\u0643 \u0648\u0644\u0647 \u0627\u0644\u062D\u0645\u062F \u0648\u0647\u0648 \u0639\u0644\u0649 \u0643\u0644 \u0634\u064A\u0621 \u0642\u062F\u064A\u0631","\u0627\u0644\u0644\u0647\u0645 \u0635\u0644 \u0648\u0633\u0644\u0645 \u0639\u0644\u0649 \u0646\u0628\u064A\u0646\u0627 \u0645\u062D\u0645\u062F","\u0623\u0633\u062A\u063A\u0641\u0631 \u0627\u0644\u0644\u0647 \u0648\u0623\u062A\u0648\u0628 \u0625\u0644\u064A\u0647","\u064A\u0627 \u062D\u064A \u064A\u0627 \u0642\u064A\u0648\u0645 \u0628\u0631\u062D\u0645\u062A\u0643 \u0623\u0633\u062A\u063A\u064A\u062B","\u0627\u0644\u0644\u0647\u0645 \u0625\u0646\u064A \u0623\u0633\u0623\u0644\u0643 \u0639\u0644\u0645\u0627 \u0646\u0627\u0641\u0639\u0627 \u0648\u0631\u0632\u0642\u0627 \u0637\u064A\u0628\u0627 \u0648\u0639\u0645\u0644\u0627 \u0645\u062A\u0642\u0628\u0644\u0627","\u0631\u0636\u064A\u062A \u0628\u0627\u0644\u0644\u0647 \u0631\u0628\u0627 \u0648\u0628\u0627\u0644\u0625\u0633\u0644\u0627\u0645 \u062F\u064A\u0646\u0627 \u0648\u0628\u0645\u062D\u0645\u062F \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645 \u0646\u0628\u064A\u0627","\u0633\u0628\u062D\u0627\u0646 \u0627\u0644\u0644\u0647\u060C \u0648\u0627\u0644\u062D\u0645\u062F \u0644\u0644\u0647\u060C \u0648\u0644\u0627 \u0625\u0644\u0647 \u0625\u0644\u0627 \u0627\u0644\u0644\u0647\u060C \u0648\u0627\u0644\u0644\u0647 \u0623\u0643\u0628\u0631","\u0644\u0627\u062D\u0648\u0644 \u0648\u0644\u0627 \u0642\u0648\u0629 \u0625\u0644\u0627 \u0628\u0627\u0644\u0644\u0647 \u0627\u0644\u0639\u0644\u064A \u0627\u0644\u0639\u0638\u064A\u0645","\u0627\u0644\u0644\u0647\u0645 \u0627\u063A\u0641\u0631 \u0644\u064A \u0648\u0644\u0648\u0627\u0644\u062F\u064A \u0648\u0644\u0644\u0645\u0624\u0645\u0646\u064A\u0646 \u0648\u0627\u0644\u0645\u0624\u0645\u0646\u0627\u062A","\u0633\u0628\u062D\u0627\u0646 \u0627\u0644\u0644\u0647 \u0648\u0628\u062D\u0645\u062F\u0647 \u0639\u062F\u062F \u062E\u0644\u0642\u0647 \u0648\u0631\u0636\u0627 \u0646\u0641\u0633\u0647 \u0648\u0632\u0646\u0629 \u0639\u0631\u0634\u0647 \u0648\u0645\u062F\u0627\u062F \u0643\u0644\u0645\u0627\u062A\u0647","\u0627\u0644\u0644\u0647\u0645 \u0625\u0646\u064A \u0623\u0639\u0648\u0630 \u0628\u0643 \u0645\u0646 \u0627\u0644\u0647\u0645 \u0648\u0627\u0644\u062D\u0632\u0646\u060C \u0648\u0627\u0644\u0639\u062C\u0632 \u0648\u0627\u0644\u0643\u0633\u0644\u060C \u0648\u0627\u0644\u0628\u062E\u0644 \u0648\u0627\u0644\u062C\u0628\u0646","\u0627\u0644\u0644\u0647\u0645 \u0628\u0643 \u0623\u0635\u0628\u062D\u0646\u0627 \u0648\u0628\u0643 \u0623\u0645\u0633\u064A\u0646\u0627 \u0648\u0628\u0643 \u0646\u062D\u064A\u0627 \u0648\u0628\u0643 \u0646\u0645\u0648\u062A \u0648\u0625\u0644\u064A\u0643 \u0627\u0644\u0646\u0634\u0648\u0631"],$r=["https://images.unsplash.com/photo-1542816417-0983c9c9ad53?auto=format&fit=crop&w=800&q=80","https://images.unsplash.com/photo-1590076214667-cda444169723?auto=format&fit=crop&w=800&q=80","https://images.unsplash.com/photo-1597933534024-164722518e38?auto=format&fit=crop&w=800&q=80","https://images.unsplash.com/photo-1507594322065-055740442436?auto=format&fit=crop&w=800&q=80","https://images.unsplash.com/photo-1564121211835-e88c852648ab?auto=format&fit=crop&w=800&q=80","https://images.unsplash.com/photo-1519817650390-64a934479f67?auto=format&fit=crop&w=800&q=80","https://images.unsplash.com/photo-1493612276216-ee3925520721?auto=format&fit=crop&w=800&q=80"],Ba="attached_assets/Picsart_26-01-11_21-02-43-508_1768158252849.png";async function La(){let t=await y.getAthkarChannels();if(t.length===0)return;let e=qr[Math.floor(Math.random()*qr.length)],r=$r[Math.floor(Math.random()*$r.length)],s=new l.EmbedBuilder().setDescription(`> ${e}`).setImage(r).setColor(44678);for(let n of t)try{let a=await Ue.channels.fetch(n);a&&await a.send({embeds:[s]})}catch(a){console.error(`Failed to send athkar to channel ${n}:`,a)}}async function Ua(){let t=await y.getAthkarChannels();if(t.length===0)return;let e=(0,Fr.default)(),r=e.format("iYYYY/iM/iD"),s=e.locale("ar").format("dddd"),n=(0,ut.createCanvas)(1200,800),a=n.getContext("2d"),o=await(0,ut.loadImage)(Ba);a.drawImage(o,0,0,1200,800),a.fillStyle="#ffffff",a.font="bold 35px sans-serif",a.textAlign="center",a.fillText("\u0645\u0648\u0627\u0642\u064A\u062A \u0627\u0644\u0635\u0644\u0627\u0629 \u062D\u0633\u0628 \u062A\u0648\u0642\u064A\u062A \u0645\u0643\u0629 \u0627\u0644\u0645\u0643\u0631\u0645\u0629",600,130),a.font="bold 30px sans-serif",a.fillText(`${s} ${r} \u0647\u0640`,600,180);let i=n.toBuffer(),u=new l.AttachmentBuilder(i,{name:"prayer.png"});for(let c of t)try{let p=await Ue.channels.fetch(c);p&&await p.send({files:[u]})}catch(p){console.error(`Failed to send prayer to channel ${c}:`,p)}}var Zr="ticket_management_select",Br=300*1e3,Lr=new Map;function Ur(){let t=new l.StringSelectMenuBuilder().setCustomId(Zr).setPlaceholder("\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062A\u0630\u0643\u0631\u0629").addOptions([{label:"Claim",description:"\u0627\u0633\u062A\u0644\u0627\u0645 \u0627\u0644\u062A\u0630\u0643\u0631\u0629 (\u0644\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A \u0641\u0642\u0637)",value:"claim",emoji:"<:Claim:1459519028627247288>"},{label:"Ownership",description:"\u0627\u0633\u062A\u062F\u0639\u0627\u0621 \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0631\u0641\u0631",value:"ownership",emoji:"<:Staf:1450923407964110978>"},{label:"Add Person",description:"\u0625\u0636\u0627\u0641\u0629 \u0634\u062E\u0635 \u0644\u0644\u062A\u0630\u0643\u0631\u0629",value:"add_person",emoji:"<:Addperson:1450903703102947469>"},{label:"Remove Person",description:"\u0625\u0632\u0627\u0644\u0629 \u0634\u062E\u0635 \u0645\u0646 \u0627\u0644\u062A\u0630\u0643\u0631\u0629",value:"remove_person",emoji:"<:removeperson:1450904784130539642>"},{label:"Rename",description:"\u062A\u063A\u064A\u064A\u0631 \u0627\u0633\u0645 \u0627\u0644\u062A\u0630\u0643\u0631\u0629",value:"rename",emoji:"<:rename:1450903708228653210>"},{label:"Delete",description:"\u062D\u0630\u0641 \u0627\u0644\u062A\u0630\u0643\u0631\u0629 \u0645\u0639 \u0627\u0644\u062A\u0642\u064A\u064A\u0645",value:"delete",emoji:"<:delete:1450910445706936451>"},{label:"Reset Menu",description:"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629",value:"reset_menu",emoji:"<:loding:1450903710342447228>"}]);return new l.ActionRowBuilder().addComponents(t)}Ue.on("interactionCreate",async t=>{try{if(t.isButton()){if(t.customId==="remove_blacklist_btn"){let e=await y.getBlacklist(t.guildId);if(e.length===0){await t.reply({content:"\u0644\u0627 \u062A\u0648\u062C\u062F \u0643\u0644\u0645\u0627\u062A \u0641\u064A \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0633\u0648\u062F\u0627\u0621 \u062D\u0627\u0644\u064A\u0627\u064B.",ephemeral:!0});return}let r=e.slice(0,25).map(a=>({label:a,value:a})),s=new l.StringSelectMenuBuilder().setCustomId("remove_blacklist_select").setPlaceholder("\u0627\u062E\u062A\u0631 \u0627\u0644\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0627\u062F \u0625\u0632\u0627\u0644\u062A\u0647\u0627").addOptions(r),n=new l.ActionRowBuilder().addComponents(s);await t.reply({content:"\u0627\u062E\u062A\u0631 \u0627\u0644\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0627\u062F \u0625\u0632\u0627\u0644\u062A\u0647\u0627:",components:[n],ephemeral:!0})}}else if(t.isStringSelectMenu()){if(t.customId==="shortcut_admin_select"){let e=t.values[0],r=new l.ModalBuilder().setCustomId(`shortcut_modal_${e}`).setTitle(`\u0625\u0636\u0627\u0641\u0629 \u0627\u062E\u062A\u0635\u0627\u0631 \u0644\u0640 ${e}`),s=new l.TextInputBuilder().setCustomId("shortcut_input").setLabel("\u0627\u0643\u062A\u0628 \u0627\u0644\u0627\u062E\u062A\u0635\u0627\u0631 \u0627\u0644\u0643\u062A\u0627\u0628\u064A \u0647\u0646\u0627 (\u0645\u062B\u0627\u0644: .t)").setStyle(l.TextInputStyle.Short).setRequired(!0),n=new l.ActionRowBuilder().addComponents(s);r.addComponents(n),await t.showModal(r)}if(t.customId.startsWith("shortcut_restrict_select_")){let e=t.customId.replace("shortcut_restrict_select_","").split("_"),r=e[0],s=e[1],n=t.values[0];if(n==="none")await y.setShortcut(t.guildId,s,r,{}),await t.reply({content:`\u2705 \u062A\u0645 \u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u0627\u062E\u062A\u0635\u0627\u0631 \`${s}\` \u0644\u0644\u0623\u0645\u0631 \`${r}\` \u0644\u0644\u062C\u0645\u064A\u0639 \u0648\u0641\u064A \u0643\u0644 \u0645\u0643\u0627\u0646.`,ephemeral:!0});else if(n==="channels"){let a=new l.UserSelectMenuBuilder().setCustomId(`shortcut_channels_select_${r}_${s}`).setPlaceholder("\u0627\u062E\u062A\u0631 \u0627\u0644\u0631\u0648\u0645\u0627\u062A (\u0642\u0631\u064A\u0628\u0627\u064B)");await t.reply({content:"\u0633\u064A\u062A\u0645 \u062F\u0639\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0631\u0648\u0645\u0627\u062A \u0642\u0631\u064A\u0628\u0627\u064B\u060C \u062D\u0627\u0644\u064A\u0627\u064B \u0627\u0644\u0627\u062E\u062A\u0635\u0627\u0631 \u0633\u064A\u0639\u0645\u0644 \u0644\u0644\u062C\u0645\u064A\u0639.",ephemeral:!0}),await y.setShortcut(t.guildId,s,r,{})}else await t.reply({content:"\u0633\u064A\u062A\u0645 \u062F\u0639\u0645 \u0627\u0644\u0631\u062A\u0628 \u0642\u0631\u064A\u0628\u0627\u064B\u060C \u062D\u0627\u0644\u064A\u0627\u064B \u0627\u0644\u0627\u062E\u062A\u0635\u0627\u0631 \u0633\u064A\u0639\u0645\u0644 \u0644\u0644\u062C\u0645\u064A\u0639.",ephemeral:!0}),await y.setShortcut(t.guildId,s,r,{})}}else if(t.isModalSubmit()){if(t.customId.startsWith("shortcut_modal_")){let e=t.customId.replace("shortcut_modal_",""),r=t.fields.getTextInputValue("shortcut_input"),s=new l.StringSelectMenuBuilder().setCustomId(`shortcut_restrict_select_${e}_${r}`).setPlaceholder("\u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0636\u0627\u0641\u0629 \u0642\u064A\u0648\u062F (\u0631\u0648\u0645/\u0631\u062A\u0628\u0629)\u061F").addOptions([{label:"\u0628\u062F\u0648\u0646 \u0642\u064A\u0648\u062F (\u0627\u0644\u0643\u0644 \u0648\u0641\u064A \u0623\u064A \u0645\u0643\u0627\u0646)",value:"none"},{label:"\u062A\u062D\u062F\u064A\u062F \u0631\u0648\u0645\u0627\u062A \u0645\u0639\u064A\u0646\u0629",value:"channels"},{label:"\u062A\u062D\u062F\u064A\u062F \u0631\u062A\u0628 \u0645\u0639\u064A\u0646\u0629",value:"roles"}]),n=new l.ActionRowBuilder().addComponents(s);await t.reply({content:`\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0627\u062E\u062A\u0635\u0627\u0631 \`${r}\` \u0644\u0644\u0623\u0645\u0631 \`${e}\`.
\u0627\u0644\u0622\u0646 \u062D\u062F\u062F \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A:`,components:[n],ephemeral:!0})}if(t.customId==="add_blacklist_modal"){let r=t.fields.getTextInputValue("words_input").split(/,|/).map(u=>u.trim()).filter(u=>u.length>0),s=await y.getBlacklist(t.guildId),n=Array.from(new Set([...s,...r]));await y.setBlacklist(t.guildId,n),await y.setProtectionSetting(t.guildId,"words",!0);let a=await y.getBlacklist(t.guildId),o=await y.getProtectionSettings(t.guildId),i=[...a];o.links&&i.push("https://","http://");try{let u=await t.guild.autoModerationRules.fetch(),c=u.find(m=>m.name==="NTL BOT AutoMod Rule"),p={name:"NTL BOT AutoMod Rule",eventType:1,triggerType:1,triggerMetadata:{keywordFilter:i.slice(0,1e3).map(m=>m.substring(0,60))},actions:[{type:1,metadata:{customMessage:"Blocked by NTL BOT"}}],enabled:!0};if(c)await c.edit({triggerMetadata:p.triggerMetadata,actions:p.actions,enabled:!0});else{if(u.filter(m=>m.triggerType===1).size>=6){await t.followUp({content:"\u26A0\uFE0F \u0644\u0627 \u064A\u0645\u0643\u0646 \u0625\u0646\u0634\u0627\u0621 \u0642\u0627\u0639\u062F\u0629 \u062D\u0645\u0627\u064A\u0629 \u062C\u062F\u064A\u062F\u0629 \u0644\u0623\u0646 \u0627\u0644\u0633\u064A\u0631\u0641\u0631 \u0648\u0635\u0644 \u0644\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649 \u0645\u0646 \u0642\u0648\u0627\u0639\u062F AutoMod (6 \u0642\u0648\u0627\u0639\u062F). \u064A\u0631\u062C\u0649 \u062D\u0630\u0641 \u0625\u062D\u062F\u0649 \u0627\u0644\u0642\u0648\u0627\u0639\u062F \u0627\u0644\u064A\u062F\u0648\u064A\u0629 \u0644\u064A\u062A\u0645\u0643\u0646 \u0627\u0644\u0628\u0648\u062A \u0645\u0646 \u0627\u0644\u0639\u0645\u0644.",ephemeral:!0});return}await t.guild.autoModerationRules.create(p)}}catch(u){console.error("Failed to manage AutoMod rule on modal submit:",u),await t.followUp({content:'\u274C \u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u062F\u064A\u062B \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u062D\u0645\u0627\u064A\u0629 \u0641\u064A \u062F\u064A\u0633\u0643\u0648\u0631\u062F. \u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646 \u0627\u0644\u0628\u0648\u062A \u0644\u062F\u064A\u0647 \u0635\u0644\u0627\u062D\u064A\u0629 "Manage Guild".',ephemeral:!0})}await t.reply({content:`**\u062A\u0645 \u062A\u0641\u0639\u064A\u0644 \u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u0628 \u0648\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0643\u0644\u0645\u0627\u062A \u0628\u0646\u062C\u0627\u062D! \u2705
\u0627\u0644\u0643\u0644\u0645\u0627\u062A \u0627\u0644\u0645\u0636\u0627\u0641\u0629: ${r.join(", ")}**`,ephemeral:!0})}}if(t.isChatInputCommand()){let{commandName:e}=t;if(e==="shortcuts"){if(!t.memberPermissions?.has(l.PermissionFlagsBits.Administrator)){await t.reply({content:"\u0639\u0630\u0631\u0627\u064B\u060C \u0647\u0630\u0627 \u0627\u0644\u0623\u0645\u0631 \u0645\u062E\u0635\u0635 \u0644\u0644\u0625\u062F\u0627\u0631\u064A\u064A\u0646 \u0641\u0642\u0637. \u274C",ephemeral:!0});return}let r=new l.EmbedBuilder().setAuthor({name:t.guild.name,iconURL:t.guild.iconURL()||void 0}).setDescription(`> **__\u0627\u062E\u062A\u0635\u0627\u0631\u0627\u062A \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u062F\u0627\u0631\u064A\u0629 \u0627\u0644\u062A\u0627\u0644\u064A\u0629__**
- **time out**
- **ban**
- **warn**
- **warnings**
- **nickname**
- **lock**

**\u0648\u062C\u0645\u064A\u0639 \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u064A\u0645\u0643\u0646\u0643 \u062A\u0639\u062F\u064A\u0644\u0647\u0627 \u0648\u0625\u0636\u0627\u0641\u0629 \u0627\u062E\u062A\u0635\u0627\u0631 \u0643\u062A\u0627\u0628\u064A \u0645\u0646 \u062E\u0644\u0627\u0644 \u0627\u0644\u0634\u0631\u064A\u0637 \u0627\u0644\u0630\u064A \u0628\u0627\u0644\u0623\u0633\u0641\u0644**`).setThumbnail(t.guild.iconURL()).setColor(2829617),s=new l.StringSelectMenuBuilder().setCustomId("shortcut_admin_select").setPlaceholder("\u0627\u062E\u062A\u0631 \u0627\u0644\u0623\u0645\u0631 \u0644\u0625\u0636\u0627\u0641\u0629 \u0627\u062E\u062A\u0635\u0627\u0631 \u0644\u0647").addOptions([{label:"Time out",value:"timeout",emoji:"\u23F3"},{label:"Ban",value:"ban",emoji:"\u{1F528}"},{label:"Warn",value:"warn",emoji:"\u26A0\uFE0F"},{label:"Warnings",value:"warnings",emoji:"\u{1F4DC}"},{label:"Nickname",value:"nickname",emoji:"\u{1F464}"},{label:"Lock",value:"lock",emoji:"\u{1F512}"},{label:"Unlock",value:"unlock",emoji:"\u{1F513}"},{label:"Untimeout",value:"untimeout",emoji:"\u{1F504}"},{label:"Unwarn",value:"unwarn",emoji:"\u{1F6E1}\uFE0F"}]),n=new l.ActionRowBuilder().addComponents(s);await t.reply({embeds:[r],components:[n]})}if(e==="protection"){if(!t.memberPermissions?.has(l.PermissionFlagsBits.Administrator)){await t.reply({content:"\u0639\u0630\u0631\u0627\u064B\u060C \u0647\u0630\u0627 \u0627\u0644\u0623\u0645\u0631 \u0645\u062E\u0635\u0635 \u0644\u0644\u0625\u062F\u0627\u0631\u064A\u064A\u0646 \u0641\u0642\u0637. \u274C",ephemeral:!0});return}let r=await y.getProtectionSettings(t.guildId),s=await y.getBlacklist(t.guildId);if(r.words||r.links)try{let m=await t.guild.autoModerationRules.fetch(),I=m.find(P=>P.name==="NTL BOT AutoMod Rule"),T=[...s];if(r.links&&T.push("https://","http://"),T.length>0){let P={name:"NTL BOT AutoMod Rule",eventType:1,triggerType:1,triggerMetadata:{keywordFilter:T.slice(0,1e3).map(b=>b.substring(0,60))},actions:[{type:1,metadata:{customMessage:"Blocked by NTL BOT."}}],enabled:!0};I?await I.edit({triggerMetadata:P.triggerMetadata,actions:P.actions,enabled:!0}):m.filter(b=>b.triggerType===1).size<6&&await t.guild.autoModerationRules.create(P)}}catch(m){console.error("Auto-sync AutoMod failed:",m)}let n="<:no:1460653630435754058>",a="<:Yes:1460653760614367334>",o=new l.EmbedBuilder().setAuthor({name:t.guild.name,iconURL:t.guild.iconURL()||void 0}).setDescription(`> **\u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u0628** ${r.words?a:n}
> **\u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0631\u0648\u0627\u0628\u0637** ${r.links?a:n}
> **\u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u0628\u0627\u0645** ${r.spam?a:n}`).setThumbnail(t.guild.iconURL()).setColor(2829617),i=new l.StringSelectMenuBuilder().setCustomId("protection_select").setPlaceholder("\u0627\u062E\u062A\u0631 \u0627\u0644\u062D\u0645\u0627\u064A\u0629 \u0644\u062A\u0641\u0639\u064A\u0644\u0647\u0627/\u0625\u064A\u0642\u0627\u0641\u0647\u0627").addOptions([{label:"\u062D\u0645\u0627\u064A\u0629 \u0633\u0628",value:"words",emoji:"<:shitword:1460652547428716635>"},{label:"\u062D\u0645\u0627\u064A\u0629 \u0631\u0648\u0627\u0628\u0637",value:"links",emoji:"<:links:1460652545142820864>"},{label:"\u062D\u0645\u0627\u064A\u0629 \u0633\u0628\u0627\u0645",value:"spam",emoji:"<:Spam:1460652542794141941>"},{label:"Reset Menu",description:"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629",value:"reset_menu",emoji:"<:loding:1450903710342447228>"}]),u=new l.ButtonBuilder().setCustomId("remove_blacklist_btn").setLabel("\u0625\u0632\u0627\u0644\u0629 \u0643\u0644\u0645\u0627\u062A").setStyle(l.ButtonStyle.Danger).setDisabled(s.length===0),c=new l.ActionRowBuilder().addComponents(i),p=new l.ActionRowBuilder().addComponents(u);await t.reply({embeds:[o],components:[c,p]})}else if(e==="timeout"){let r=t.options.getUser("user"),s=t.options.getString("duration"),n=await t.guild?.members.fetch(r.id);if(!n){await t.reply("User not found in this guild.");return}let a=0,o=s.slice(-1),i=parseInt(s.slice(0,-1));if(o==="m")a=i*60*1e3;else if(o==="h")a=i*60*60*1e3;else if(o==="d")a=i*24*60*60*1e3;else if(o==="w")a=i*7*24*60*60*1e3;else{await t.reply("Invalid duration format. Use 1m, 1h, 1d, 1w.");return}try{await n.timeout(a),await t.reply(`**\u062A\u0645 \u0625\u0633\u0643\u0627\u062A ,${r} <:Time:1459533510795727042>**`)}catch{await t.reply("Failed to timeout user. Check permissions.")}}else if(e==="untimeout"){let r=t.options.getUser("user"),s=await t.guild?.members.fetch(r.id);if(!s)return;try{await s.timeout(null),await t.reply(`**\u062A\u0645 \u0641\u0643 \u0627\u0644\u0625\u0633\u0643\u0627\u062A \u0639\u0646 ,${r} <:Talk:1459320327837581383>**`)}catch{await t.reply("Failed to untimeout user.")}}else if(e==="warn"){let r=t.options.getUser("user"),s=t.options.getString("reason");await y.createWarning({userId:r.id,moderatorId:t.user.id,reason:s});let n=new l.EmbedBuilder().setDescription(`**\u0644\u0642\u062F \u062A\u0645 \u062A\u062D\u0630\u064A\u0631 ,${r} \u0628\u0633\u0628\u0628 ${s} <:Warn:1459314982574489876>**`);await t.reply({embeds:[n]})}else if(e==="unwarn"){let r=t.options.getUser("user"),s=await y.getWarnings(r.id);if(s.length===0){await t.reply("This user has no warnings.");return}let n=s.slice(0,25).map(i=>({label:`${i.reason.substring(0,50)}...`,description:`Date: ${i.createdAt?.toLocaleDateString()}`,value:i.id.toString()})),a=new l.StringSelectMenuBuilder().setCustomId("delete_warning_select").setPlaceholder("\u0627\u062E\u062A\u0631 \u062A\u062D\u0630\u064A\u0631\u0627\u064B \u0644\u062D\u0630\u0641\u0647").addOptions(n),o=new l.ActionRowBuilder().addComponents(a);await t.reply({content:"\u0627\u062E\u062A\u0631 \u0627\u0644\u062A\u062D\u0630\u064A\u0631 \u0627\u0644\u0630\u064A \u062A\u0631\u064A\u062F \u062D\u0630\u0641\u0647:",components:[o],ephemeral:!0})}else if(e==="warnings"){let r=t.options.getUser("user"),s=await y.getWarnings(r.id),n=new l.EmbedBuilder().setTitle(`\u062A\u062D\u0630\u064A\u0631\u0627\u062A ${r?.username}`);s.length===0?n.setDescription("\u0644\u0627 \u064A\u0648\u062C\u062F \u062A\u062D\u0630\u064A\u0631\u0627\u062A."):s.forEach(a=>{n.addFields({name:`ID: ${a.id}`,value:`\u0627\u0644\u0633\u0628\u0628: ${a.reason}
\u0628\u0648\u0627\u0633\u0637\u0629: <@${a.moderatorId}>
\u0627\u0644\u062A\u0627\u0631\u064A\u062E: ${a.createdAt?.toLocaleDateString()}`})}),await t.reply({embeds:[n]})}else if(e==="nick"){let r=t.options.getUser("user"),s=t.options.getString("new_name"),n=await t.guild?.members.fetch(r.id);try{await n?.setNickname(s),await t.reply(`Changed nickname for ${r} to ${s}`)}catch{await t.reply("Failed to change nickname. Check hierarchy/permissions.")}}else if(e==="lock"){let r=t.channel;if(r?.type!==l.ChannelType.GuildText){await t.reply("This command can only be used in text channels.");return}try{await r.permissionOverwrites.edit(t.guild.roles.everyone,{SendMessages:!1,CreatePublicThreads:!1,CreatePrivateThreads:!1}),await t.reply("** \u0644\u0642\u062F \u062A\u0645 \u0642\u0641\u0644 \u0627\u0644\u0631\u0648\u0645 <:Lock:1459700856592007431> **")}catch{await t.reply("Failed to lock channel.")}}else if(e==="unlock"){let r=t.channel;if(r?.type!==l.ChannelType.GuildText)return;try{await r.permissionOverwrites.edit(t.guild.roles.everyone,{SendMessages:!0,CreatePublicThreads:!0}),await t.reply("** \u0644\u0642\u062F \u062A\u0645 \u0641\u062A\u062D \u0627\u0644\u0631\u0648\u0645 <:Unlock:1459700854641791081> **")}catch{await t.reply("Failed to unlock channel.")}}else if(e==="ban"){let r=t.options.getUser("user");try{await t.guild?.members.ban(r),await t.reply(`** \u0644\u0642\u062F \u062A\u0645 \u062D\u0638\u0631 ${r} \u0645\u0646 \u0627\u0644\u0633\u064A\u0631\u0641\u0631!\u2708\uFE0F\u2705 **`)}catch{await t.reply("Failed to ban user.")}}else if(e==="unban"){let r=t.options.getUser("user");try{await t.guild?.members.unban(r),await t.reply(`** \u0644\u0642\u062F \u062A\u0645 \u0641\u0643 \u0627\u0644\u062D\u0638\u0631 \u0639\u0646 ${r}! **`)}catch{await t.reply("Failed to unban user.")}}else if(e==="kick"){let r=t.options.getUser("user"),s=await t.guild?.members.fetch(r.id);try{await s?.kick(),await t.reply(`**\u0644\u0642\u062F \u062A\u0645 \u0637\u0631\u062F ${r} \u0645\u0646 \u0627\u0644\u0633\u064A\u0631\u0641\u0631!\u2708\uFE0F\u{1F462}**`)}catch{await t.reply("Failed to kick user.")}}else if(e==="ticket"){if(t.options.getSubcommand()==="points"){let s=t.options.getUser("user"),n=await y.getSupportPoints(s.id),a=new l.EmbedBuilder().setDescription(`** <@${s.id}> \u0644\u062F\u064A\u0647 ,**__${n}__** \u0645\u0646 \u0646\u0642\u0627\u0637 \u0627\u0633\u062A\u0644\u0627\u0645 \u062A\u0643\u062A \u0627\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A <:points:1459925417594196060> **`).setColor(65280);await t.reply({embeds:[a]})}}else if(e==="panel"){let r=t.options.getString("name"),s=t.options.getString("title"),n=t.options.getString("description"),a=t.options.getString("button_name"),o=t.options.getString("emoji_button"),i=t.options.getString("welcome_message"),u=t.options.getRole("support_role"),c=t.options.getChannel("category"),p=t.options.getAttachment("image"),m=t.options.getAttachment("ticket_image");await y.createPanel({name:r,title:s,description:n,buttonName:a,buttonEmoji:o,welcomeMessage:i,supportRoles:[u.id],categoryId:c.id,imageUrl:p?.url||null,ticketWelcomeImageUrl:m?.url||null}),await t.reply({content:"\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0648\u062D\u0641\u0638 \u0627\u0644\u0628\u0627\u0646\u0644 \u0628\u0646\u062C\u0627\u062D! \u{1F60B}",ephemeral:!0})}else if(e==="athkar"){let r=t.options.getChannel("channel");await y.setAthkarChannel(r.id,t.guildId),await t.reply({content:`**\u062A\u0645 \u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u0623\u0630\u0643\u0627\u0631 \u0641\u064A \u0642\u0646\u0627\u0629 <#${r.id}> \u0628\u0646\u062C\u0627\u062D! \u2705**`,ephemeral:!0})}else if(e==="athkar_off")await y.setAthkarChannel("",t.guildId),await t.reply({content:"**\u062A\u0645 \u0625\u064A\u0642\u0627\u0641 \u0627\u0644\u0623\u0630\u0643\u0627\u0631 \u0641\u064A \u0647\u0630\u0627 \u0627\u0644\u0633\u064A\u0631\u0641\u0631 \u0628\u0646\u062C\u0627\u062D! \u274C**",ephemeral:!0});else if(e==="protection"){if(!t.memberPermissions?.has(l.PermissionFlagsBits.Administrator)){await t.reply({content:"\u0639\u0630\u0631\u0627\u064B\u060C \u0647\u0630\u0627 \u0627\u0644\u0623\u0645\u0631 \u0645\u062E\u0635\u0635 \u0644\u0644\u0625\u062F\u0627\u0631\u064A\u064A\u0646 \u0641\u0642\u0637. \u274C",ephemeral:!0});return}let r=await y.getProtectionSettings(t.guildId),s=t.guild,n="<:no:1460653630435754058>",a="<:Yes:1460653760614367334>",o=new l.EmbedBuilder().setAuthor({name:t.guild.name,iconURL:t.guild.iconURL()||void 0}).setDescription(`> **\u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u0628** ${r.words?a:n}
> **\u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0631\u0648\u0627\u0628\u0637** ${r.links?a:n}
> **\u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u0628\u0627\u0645** ${r.spam?a:n}`).setThumbnail(t.guild.iconURL()).setColor(2829617),i=new l.StringSelectMenuBuilder().setCustomId("protection_select").setPlaceholder("\u0627\u062E\u062A\u0631 \u0627\u0644\u062D\u0645\u0627\u064A\u0629 \u0644\u062A\u0641\u0639\u064A\u0644\u0647\u0627/\u0625\u064A\u0642\u0627\u0641\u0647\u0627").addOptions([{label:"\u062D\u0645\u0627\u064A\u0629 \u0633\u0628",value:"words",emoji:"<:shitword:1460652547428716635>"},{label:"\u062D\u0645\u0627\u064A\u0629 \u0631\u0648\u0627\u0628\u0637",value:"links",emoji:"<:links:1460652545142820864>"},{label:"\u062D\u0645\u0627\u064A\u0629 \u0633\u0628\u0627\u0645",value:"spam",emoji:"<:Spam:1460652542794141941>"},{label:"Reset Menu",description:"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629",value:"reset_menu",emoji:"<:loding:1450903710342447228>"}]),u=new l.ActionRowBuilder().addComponents(i);await t.reply({embeds:[o],components:[u]})}else if(e==="blackword"){let s=t.options.getString("words").split(/,|/).map(n=>n.trim()).filter(n=>n.length>0);if(!t.guild)return;try{let a=(await t.guild.autoModerationRules.fetch()).find(o=>o.name==="NTL BOT AutoMod Rule");a?await a.edit({triggerMetadata:{keywordFilter:s}}):await t.guild.autoModerationRules.create({name:"NTL BOT AutoMod Rule",eventType:1,triggerType:1,triggerMetadata:{keywordFilter:s},actions:[{type:1,metadata:{customMessage:"This message was prevented by a AutoMod rule created by NTL BOT."}}],enabled:!0}),await y.setBlacklist(t.guildId,s),await t.reply({content:`**\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0646\u0638\u0627\u0645 \u0627\u0644\u062D\u0638\u0631 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A (AutoMod) \u0628\u0646\u062C\u0627\u062D! \u2705
\u0627\u0644\u0643\u0644\u0645\u0627\u062A \u0627\u0644\u0645\u062D\u0638\u0648\u0631\u0629 \u062D\u0627\u0644\u064A\u0627\u064B: ${s.join(", ")}**`,ephemeral:!0})}catch(n){console.error("Failed to manage AutoMod rule:",n),await t.reply({content:"\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0646\u0638\u0627\u0645 AutoMod. \u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646 \u0627\u0644\u0628\u0648\u062A \u0644\u062F\u064A\u0647 \u0635\u0644\u0627\u062D\u064A\u0629 `Manage Guild`.",ephemeral:!0})}}else if(e==="send_panel"){let r=await y.getPanels();if(r.length===0){await t.reply({content:"\u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u0627\u0646\u0644\u0627\u062A \u0645\u0646\u0634\u0623\u0629 \u062D\u0627\u0644\u064A\u0627\u064B.",ephemeral:!0});return}let s=r.map(o=>({label:o.name,description:o.title,value:o.id.toString()})),n=new l.StringSelectMenuBuilder().setCustomId("send_panel_select").setPlaceholder("\u0627\u062E\u062A\u0631 \u0627\u0644\u0628\u0627\u0646\u0644\u0627\u062A \u0627\u0644\u062A\u064A \u062A\u0631\u064A\u062F \u0625\u0631\u0633\u0627\u0644\u0647\u0627 (\u064A\u0645\u0643\u0646\u0643 \u0627\u062E\u062A\u064A\u0627\u0631 \u062D\u062A\u0649 5)").setMinValues(1).setMaxValues(Math.min(r.length,5)).addOptions(s),a=new l.ActionRowBuilder().addComponents(n);await t.reply({content:"\u0627\u062E\u062A\u0631 \u0627\u0644\u0628\u0627\u0646\u0644\u0627\u062A \u0644\u062F\u0645\u062C\u0647\u0627 \u0641\u064A \u0631\u0633\u0627\u0644\u0629 \u0648\u0627\u062D\u062F\u0629:",components:[a],ephemeral:!0})}}else if(t.isStringSelectMenu()){let{customId:e,values:r}=t;if(e==="protection_select"){let s=r[0];if(s==="reset_menu"){await t.update({content:t.message.content});return}if(s==="words"){let b=new l.EmbedBuilder().setTitle("\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u0628").setDescription("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0632\u0631 \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0623\u062F\u0646\u0627\u0647 \u0644\u0644\u062A\u062D\u0643\u0645 \u0641\u064A \u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u0628").setColor(2829617),S=new l.StringSelectMenuBuilder().setCustomId("protection_select").setPlaceholder("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0632\u0631").addOptions([{label:"\u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u062D\u0645\u0627\u064A\u0629",value:"words_enable",emoji:"\u2705"},{label:"\u0625\u064A\u0642\u0627\u0641 \u0627\u0644\u062D\u0645\u0627\u064A\u0629",value:"words_disable",emoji:"\u274C"},{label:"\u0625\u0636\u0627\u0641\u0629 \u0643\u0644\u0645\u0627\u062A",value:"words_add",emoji:"\u2795"}]),O=new l.ActionRowBuilder().addComponents(S);await t.reply({embeds:[b],components:[O],ephemeral:!0});return}if(s==="words_enable"||s==="words_disable"){let b=s==="words_enable";await y.setProtectionSetting(t.guildId,"words",b);try{let O=(await t.guild.autoModerationRules.fetch()).find(C=>C.name==="NTL BOT AutoMod Rule");O&&await O.edit({enabled:b})}catch(S){console.error("Failed to toggle AutoMod rule:",S)}await t.reply({content:`\u062A\u0645 ${b?"\u062A\u0641\u0639\u064A\u0644":"\u0625\u064A\u0642\u0627\u0641"} \u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u0628 \u0628\u0646\u062C\u0627\u062D! ${b?"\u2705":"\u274C"}`,ephemeral:!0});return}if(s==="words_add"){let b=new l.ModalBuilder().setCustomId("add_blacklist_modal").setTitle("\u0625\u0636\u0627\u0641\u0629 \u0643\u0644\u0645\u0627\u062A \u0644\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0633\u0648\u062F\u0627\u0621"),S=new l.TextInputBuilder().setCustomId("words_input").setLabel("\u0627\u0644\u0643\u0644\u0645\u0627\u062A (\u0627\u0641\u0635\u0644 \u0628\u064A\u0646\u0647\u0627 \u0628\u0641\u0627\u0635\u0644\u0629)").setStyle(l.TextInputStyle.Paragraph).setPlaceholder("\u0643\u0644\u0645\u06291, \u0643\u0644\u0645\u06292, \u0643\u0644\u0645\u06293").setRequired(!0),O=new l.ActionRowBuilder().addComponents(S);b.addComponents(O),await t.showModal(b);return}let a=!(await y.getProtectionSettings(t.guildId))[s];await y.setProtectionSetting(t.guildId,s,a);try{let b=await t.guild.autoModerationRules.fetch();if(s==="links"){let S=b.find(O=>O.name==="NTL BOT Links Protection");a?S?await S.edit({enabled:!0}):await t.guild.autoModerationRules.create({name:"NTL BOT Links Protection",eventType:1,triggerType:5,triggerMetadata:{keywordFilter:["*http://*","*https://*"]},actions:[{type:1,metadata:{customMessage:"Blocked by NTL BOT Links Protection"}}],enabled:!0}):S&&await S.edit({enabled:!1})}else if(s==="spam"){let S=b.find(O=>O.name==="NTL BOT Spam Protection");if(a)if(!S)await t.guild.autoModerationRules.create({name:"NTL BOT Spam Protection",eventType:1,triggerType:3,actions:[{type:1,metadata:{customMessage:"Blocked by NTL BOT Spam Protection"}},{type:3,metadata:{durationSeconds:60}}],enabled:!0}),await t.guild.autoModerationRules.create({name:"NTL BOT Mention Spam Protection",eventType:1,triggerType:5,triggerMetadata:{mentionTotalLimit:5},actions:[{type:1,metadata:{customMessage:"Blocked by NTL BOT Mention Spam Protection"}},{type:3,metadata:{durationSeconds:60}}],enabled:!0});else{await S.edit({enabled:!0,actions:[{type:1,metadata:{customMessage:"Blocked by NTL BOT Spam Protection"}},{type:3,metadata:{durationSeconds:60}}]});let O=b.find(C=>C.name==="NTL BOT Mention Spam Protection");O&&await O.edit({enabled:!0})}else if(S){await S.edit({enabled:!1});let O=b.find(C=>C.name==="NTL BOT Mention Spam Protection");O&&await O.edit({enabled:!1})}}}catch(b){console.error("Failed to manage AutoMod rule for links/spam:",b)}let o=await y.getProtectionSettings(t.guildId),i=await y.getBlacklist(t.guildId),u="<:no:1460653630435754058>",c="<:Yes:1460653760614367334>",p=new l.EmbedBuilder().setAuthor({name:t.guild.name,iconURL:t.guild.iconURL()||void 0}).setDescription(`> **\u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u0628** ${o.words?c:u}
> **\u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0631\u0648\u0627\u0628\u0637** ${o.links?c:u}
> **\u062D\u0645\u0627\u064A\u0629 \u0627\u0644\u0633\u0628\u0627\u0645** ${o.spam?c:u}`).setThumbnail(t.guild.iconURL()).setColor(2829617),m=new l.ButtonBuilder().setCustomId("remove_blacklist_btn").setLabel("\u0625\u0632\u0627\u0644\u0629 \u0643\u0644\u0645\u0627\u062A").setStyle(l.ButtonStyle.Danger).setDisabled(i.length===0),I=new l.StringSelectMenuBuilder().setCustomId("protection_select").setPlaceholder("\u0627\u062E\u062A\u0631 \u0627\u0644\u062D\u0645\u0627\u064A\u0629 \u0644\u062A\u0641\u0639\u064A\u0644\u0647\u0627/\u0625\u064A\u0642\u0627\u0641\u0647\u0627").addOptions([{label:"\u062D\u0645\u0627\u064A\u0629 \u0633\u0628",value:"words",emoji:"<:shitword:1460652547428716635>"},{label:"\u062D\u0645\u0627\u064A\u0629 \u0631\u0648\u0627\u0628\u0637",value:"links",emoji:"<:links:1460652545142820864>"},{label:"\u062D\u0645\u0627\u064A\u0629 \u0633\u0628\u0627\u0645",value:"spam",emoji:"<:Spam:1460652542794141941>"},{label:"Reset Menu",description:"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629",value:"reset_menu",emoji:"<:loding:1450903710342447228>"}]),T=new l.ActionRowBuilder().addComponents(I),P=new l.ActionRowBuilder().addComponents(m);await t.update({embeds:[p],components:[T,P]})}else if(e==="remove_blacklist_select"){let s=r[0],a=(await y.getBlacklist(t.guildId)).filter(o=>o!==s);await y.setBlacklist(t.guildId,a);try{let i=(await t.guild.autoModerationRules.fetch()).find(u=>u.name==="NTL BOT AutoMod Rule");i&&(a.length>0?await i.edit({triggerMetadata:{keywordFilter:a}}):await i.delete())}catch(o){console.error("Failed to update AutoMod rule on remove:",o)}await t.update({content:`**\u062A\u0645 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0643\u0644\u0645\u0629 "${s}" \u0628\u0646\u062C\u0627\u062D! \u2705**`,components:[],embeds:[]})}else if(t.customId==="delete_warning_select"){let s=parseInt(t.values[0]);await y.deleteWarning(s),await t.update({content:"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062A\u062D\u0630\u064A\u0631 \u0628\u0646\u062C\u0627\u062D.",components:[]})}else if(t.customId==="ticket_rating_select"){let s=await y.getTicketByChannel(t.channelId);if(s&&t.user.id!==s.creatorId){await t.reply({content:"\u0641\u0642\u0637 \u0641\u0627\u062A\u062D \u0627\u0644\u062A\u0630\u0643\u0631\u0629 \u064A\u0645\u0643\u0646\u0647 \u0627\u0644\u062A\u0642\u064A\u064A\u0645.",ephemeral:!0});return}let n=t.values[0];s?.claimedBy&&await y.addSupportPoint(s.claimedBy),await t.update({content:`\u0634\u0643\u0631\u0627\u064B \u0644\u062A\u0642\u064A\u064A\u0645\u0643 (${n} \u0646\u062C\u0648\u0645)! \u0633\u064A\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062A\u0630\u0643\u0631\u0629 \u062E\u0644\u0627\u0644 5 \u062B\u0648\u0627\u0646\u064D.`,components:[]}).catch(console.error),await y.deleteTicketByChannel(t.channelId),setTimeout(()=>t.channel?.delete().catch(console.error),5e3)}else if(t.customId==="send_panel_select"){let s=t.values.map(c=>parseInt(c)),a=(await Promise.all(s.map(c=>y.getPanel(c)))).filter(c=>c!==void 0);if(a.length===0)return;let o=new l.EmbedBuilder().setTitle(a.length===1?a[0].name:"\u0627\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A").setDescription(a.length===1?a[0].title:"\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 \u0627\u0644\u0645\u0646\u0627\u0633\u0628 \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0628\u0627\u0644\u0623\u0633\u0641\u0644 \u0644\u0641\u062A\u062D \u062A\u0630\u0643\u0631\u0629");t.guild?.iconURL()&&o.setThumbnail(t.guild.iconURL()),a.length===1&&a[0].ticketWelcomeImageUrl&&o.setImage(a[0].ticketWelcomeImageUrl);let i=new l.StringSelectMenuBuilder().setCustomId("open_ticket_select").setPlaceholder("\u0627\u0636\u063A\u0637 \u0644\u0641\u062A\u062D \u0627\u0644\u062A\u0630\u0643\u0631\u0629").addOptions([...a.map(c=>({label:c.buttonName||c.name,description:c.title,value:c.id.toString(),emoji:c.buttonEmoji||"\u{1F4E9}"})),{label:"Reset Menu",description:"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629",value:"reset_menu",emoji:"<:loding:1450903710342447228>"}]),u=new l.ActionRowBuilder().addComponents(i);t.channel?.isTextBased()&&(await t.channel.send({embeds:[o],components:[u]}),await t.update({content:"\u062A\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0628\u0627\u0646\u0644 \u0628\u0646\u062C\u0627\u062D!",components:[]}))}else if(t.customId==="open_ticket_select"){let s=t.values[0];if(s==="reset_menu"){await t.update({content:t.message.content});return}let n=parseInt(s),a=await y.getPanel(n);if(!a){await t.reply({content:"Panel configuration not found.",ephemeral:!0});return}await t.deferReply({ephemeral:!0});try{let o=t.guild;if(!o)return;let i=await y.getOpenTicketsByUser(t.user.id),u=[];for(let C of i)try{await o.channels.fetch(C.channelId)?u.push(C):await y.deleteTicketByChannel(C.channelId)}catch{await y.deleteTicketByChannel(C.channelId)}if(u.length>0){await t.editReply({content:"\u0644\u062F\u064A\u0643 \u062A\u0630\u0643\u0631\u0629 \u0645\u0641\u062A\u0648\u062D\u0629 \u0628\u0627\u0644\u0641\u0639\u0644. \u064A\u0631\u062C\u0649 \u0625\u063A\u0644\u0627\u0642\u0647\u0627 \u0642\u0628\u0644 \u0641\u062A\u062D \u062A\u0630\u0643\u0631\u0629 \u062C\u062F\u064A\u062F\u0629."});return}let m=`ticket-${((await y.getStats()).ticketCount+1).toString().padStart(4,"0")}`,I=[{id:o.id,deny:[l.PermissionsBitField.Flags.ViewChannel]},{id:t.user.id,allow:[l.PermissionsBitField.Flags.ViewChannel,l.PermissionsBitField.Flags.SendMessages]},{id:Ue.user.id,allow:[l.PermissionsBitField.Flags.ViewChannel,l.PermissionsBitField.Flags.SendMessages,l.PermissionsBitField.Flags.ManageChannels]}];a.supportRoles&&a.supportRoles.forEach(C=>{C&&C.trim()&&I.push({id:C.trim(),allow:[l.PermissionsBitField.Flags.ViewChannel,l.PermissionsBitField.Flags.SendMessages]})});let T=await o.channels.create({name:m,type:l.ChannelType.GuildText,parent:a.categoryId||void 0,permissionOverwrites:I}),P=await y.createTicket({channelId:T.id,creatorId:t.user.id,panelId:a.id}),b=new l.EmbedBuilder().setDescription(a.welcomeMessage||`Welcome ${t.user}! Please describe your issue.`).setColor(65280);t.guild?.iconURL()&&b.setThumbnail(t.guild.iconURL()),a.imageUrl&&b.setImage(a.imageUrl);let S=Ur(),O=a.supportRoles?a.supportRoles.filter(C=>C.trim()).map(C=>`<@&${C.trim()}>`).join(" "):"@\u0627\u0644\u062F\u0639\u0645-\u0627\u0644\u0641\u0646\u064A";await T.send({content:`<@${t.user.id}> | ${O}`,embeds:[b],components:[S]}),await t.editReply({content:`\u062A\u0645 \u0641\u062A\u062D \u0627\u0644\u062A\u0630\u0643\u0631\u0629 \u0628\u0646\u062C\u0627\u062D \u0641\u064A \u0642\u0646\u0627\u0629 <#${T.id}>`})}catch(o){console.error("Ticket creation error:",o),await t.editReply({content:"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0641\u062A\u062D \u0627\u0644\u062A\u0630\u0643\u0631\u0629."})}}else if(t.customId===Zr){let s=t.values[0],n=await y.getTicketByChannel(t.channelId);if(!n){await t.reply({content:"\u062E\u0637\u0623: \u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062A\u0630\u0643\u0631\u0629 \u0641\u064A \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A.",ephemeral:!0});return}let o=(n.panelId?await y.getPanel(n.panelId):null)?.supportRoles?.some(i=>(t.member?.roles).cache.has(i));if(s==="claim"){if(!o){await t.reply({content:"\u0641\u0642\u0637 \u0627\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A \u064A\u0645\u0643\u0646\u0647\u0645 \u0627\u0633\u062A\u0644\u0627\u0645 \u0627\u0644\u062A\u0630\u0643\u0631\u0629.",ephemeral:!0});return}if(n.claimedBy){await t.reply({content:"\u0647\u0630\u0647 \u0627\u0644\u062A\u0630\u0643\u0631\u0629 \u0645\u0633\u062A\u0644\u0645\u0629 \u0628\u0627\u0644\u0641\u0639\u0644.",ephemeral:!0});return}if(n.creatorId===t.user.id){await t.reply({content:"\u0644\u0627 \u064A\u0645\u0643\u0646\u0643 \u0627\u0633\u062A\u0644\u0627\u0645 \u062A\u0630\u0643\u0631\u062A\u0643 \u0627\u0644\u062E\u0627\u0635\u0629.",ephemeral:!0});return}await y.updateTicket(n.id,{claimedBy:t.user.id});let i=new l.EmbedBuilder().setDescription(`**\u0644\u0642\u062F \u062A\u0645 \u0627\u0633\u062A\u0644\u0627\u0645 \u0627\u0644\u062A\u0643\u062A \u0645\u0646 \u0642\u0628\u0644 <@${t.user.id}>**`).setColor(65280);await t.reply({embeds:[i]})}else if(s==="ownership"){let i=Lr.get(t.user.id)||0,u=Date.now();if(u-i<Br){let p=Math.ceil((Br-(u-i))/1e3/60);await t.reply({content:`\u064A\u0631\u062C\u0649 \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631 ${p} \u062F\u0642\u064A\u0642\u0629 \u0644\u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0647\u0630\u0627 \u0627\u0644\u0632\u0631 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649.`,ephemeral:!0});return}let c=await t.guild?.fetchOwner();if(c){Lr.set(t.user.id,u);let p=new l.EmbedBuilder().setTitle("\u0627\u0633\u062A\u062F\u0639\u0627\u0621 \u0645\u0644\u0643\u064A\u0629 (Ownership)").setThumbnail(t.guild?.iconURL()||null).addFields({name:"\u0627\u0644\u0633\u064A\u0631\u0641\u0631",value:t.guild?.name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"},{name:"\u0628\u0648\u0627\u0633\u0637\u0629",value:`<@${t.user.id}>`},{name:"\u0627\u0644\u062A\u0630\u0643\u0631\u0629",value:`<#${t.channelId}>`}),m=new l.ActionRowBuilder().addComponents(new l.ButtonBuilder().setLabel("\u0627\u0644\u0630\u0647\u0627\u0628 \u0644\u0644\u062A\u0630\u0643\u0631\u0629").setStyle(l.ButtonStyle.Link).setURL(`https://discord.com/channels/${t.guildId}/${t.channelId}`));try{await c.send({embeds:[p],components:[m]}),await t.reply({content:"\u062A\u0645 \u0625\u0631\u0633\u0627\u0644 \u0637\u0644\u0628 \u0627\u0633\u062A\u062F\u0639\u0627\u0621 \u0644\u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0631\u0641\u0631.",ephemeral:!0})}catch{await t.reply({content:"\u0641\u0634\u0644 \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u062E\u0627\u0635\u0629 \u0644\u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0631\u0641\u0631 (\u0645\u063A\u0644\u0642\u0629).",ephemeral:!0})}}}else if(s==="add_person"||s==="remove_person"){let i=n.creatorId===t.user.id;if(!o&&!i){await t.reply({content:"\u0644\u064A\u0633 \u0644\u062F\u064A\u0643 \u0635\u0644\u0627\u062D\u064A\u0629 \u0644\u0625\u0636\u0627\u0641\u0629/\u0625\u0632\u0627\u0644\u0629 \u0623\u0634\u062E\u0627\u0635.",ephemeral:!0});return}let u=new l.UserSelectMenuBuilder().setCustomId(s==="add_person"?"add_user_select":"remove_user_select").setPlaceholder("\u0627\u062E\u062A\u0631 \u0627\u0644\u0634\u062E\u0635").setMaxValues(1),c=new l.ActionRowBuilder().addComponents(u);await t.reply({content:s==="add_person"?"\u0627\u062E\u062A\u0631 \u0627\u0644\u0634\u062E\u0635 \u0644\u0625\u0636\u0627\u0641\u062A\u0647:":"\u0627\u062E\u062A\u0631 \u0627\u0644\u0634\u062E\u0635 \u0644\u0625\u0632\u0627\u0644\u062A\u0647:",components:[c],ephemeral:!0})}else if(s==="rename"){if(!o){await t.reply({content:"\u0641\u0642\u0637 \u0627\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A \u064A\u0645\u0643\u0646\u0647\u0645 \u062A\u063A\u064A\u064A\u0631 \u0627\u0633\u0645 \u0627\u0644\u062A\u0630\u0643\u0631\u0629.",ephemeral:!0});return}let i=new l.ModalBuilder().setCustomId("rename_ticket_modal").setTitle("\u062A\u063A\u064A\u064A\u0631 \u0627\u0633\u0645 \u0627\u0644\u062A\u0630\u0643\u0631\u0629"),u=new l.TextInputBuilder().setCustomId("new_ticket_name").setLabel("\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u062C\u062F\u064A\u062F").setStyle(l.TextInputStyle.Short).setRequired(!0),c=new l.ActionRowBuilder().addComponents(u);i.addComponents(c),await t.showModal(i)}else if(s==="delete"){let i=n.claimedBy===t.user.id;if(!o&&!i){await t.reply({content:"\u0641\u0642\u0637 \u0627\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A \u0627\u0644\u0630\u064A \u0627\u0633\u062A\u0644\u0645 \u0627\u0644\u062A\u0630\u0643\u0631\u0629 \u064A\u0645\u0643\u0646\u0647 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0647\u0630\u0627 \u0627\u0644\u062E\u064A\u0627\u0631.",ephemeral:!0});return}let u=new l.EmbedBuilder().setTitle("\u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u062A\u0630\u0643\u0631\u0629").setDescription("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u062A\u0642\u064A\u064A\u0645\u0643 \u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062E\u062F\u0645\u0629 \u0644\u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u062A\u0630\u0643\u0631\u0629\u060C \u0623\u0648 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u0623\u0632\u0631\u0627\u0631 \u0623\u062F\u0646\u0627\u0647:").setColor(44678),c=new l.StringSelectMenuBuilder().setCustomId("ticket_rating_select").setPlaceholder("\u0627\u062E\u062A\u0631 \u0627\u0644\u062A\u0642\u064A\u064A\u0645").addOptions([{label:"\u0645\u0645\u062A\u0627\u0632 \u2B50\u2B50\u2B50\u2B50\u2B50",value:"5"},{label:"\u062C\u064A\u062F \u062C\u062F\u0627\u064B \u2B50\u2B50\u2B50\u2B50",value:"4"},{label:"\u062C\u064A\u062F \u2B50\u2B50\u2B50",value:"3"},{label:"\u0645\u0642\u0628\u0648\u0644 \u2B50\u2B50",value:"2"},{label:"\u0633\u064A\u0626 \u2B50",value:"1"}]),p=new l.ActionRowBuilder().addComponents(c),m=new l.ActionRowBuilder().addComponents(new l.ButtonBuilder().setCustomId("delete_anyway").setLabel("\u062D\u0630\u0641 \u0639\u0644\u0649 \u0623\u064A \u062D\u0627\u0644").setStyle(l.ButtonStyle.Danger),new l.ButtonBuilder().setCustomId("cancel_delete").setLabel("\u062A\u0631\u0627\u062C\u0639").setStyle(l.ButtonStyle.Secondary));await t.reply({embeds:[u],components:[p,m]})}else s==="reset_menu"&&await t.update({components:[Ur()]})}}else if(t.isUserSelectMenu()){if(t.customId==="add_user_select"){let e=t.values[0];await t.channel.permissionOverwrites.create(e,{ViewChannel:!0,SendMessages:!0}),await t.update({content:`\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 <@${e}> \u0644\u0644\u062A\u0630\u0643\u0631\u0629.`,components:[]})}else if(t.customId==="remove_user_select"){let e=t.values[0];await t.channel.permissionOverwrites.delete(e),await t.update({content:`\u062A\u0645\u062A \u0625\u0632\u0627\u0644\u0629 <@${e}> \u0645\u0646 \u0627\u0644\u062A\u0630\u0643\u0631\u0629.`,components:[]})}}else if(t.isButton())t.customId==="delete_anyway"?(await t.reply({content:"\u0633\u064A\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062A\u0630\u0643\u0631\u0629 \u0641\u0648\u0631\u0627\u064B."}),await y.deleteTicketByChannel(t.channelId),await t.channel?.delete().catch(console.error)):t.customId==="cancel_delete"&&(await t.message.delete().catch(console.error),t.replied||await t.deferUpdate().catch(()=>{}));else if(t.type===l.InteractionType.ModalSubmit){let e=t;if(e.customId==="rename_ticket_modal"){let r=e.fields.getTextInputValue("new_ticket_name"),s=e.channel;try{s?.setName&&(await s.setName(r),await e.reply({content:`**\u0644\u0642\u062F \u062A\u0645 \u062A\u063A\u064A\u064A\u0631 \u0627\u0633\u0645 \u0627\u0644\u062A\u0630\u0643\u0631\u0629 \u0625\u0644\u0649: ${r} \u2705**`,ephemeral:!0}))}catch(n){console.error("Rename error:",n),await e.reply({content:"\u0641\u0634\u0644 \u062A\u063A\u064A\u064A\u0631 \u0627\u0633\u0645 \u0627\u0644\u062A\u0630\u0643\u0631\u0629. \u064A\u0631\u062C\u0649 \u0627\u0644\u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A.",ephemeral:!0})}}}}catch(e){console.error("Interaction error:",e);try{t.isRepliable()&&(!t.replied&&!t.deferred?await t.reply({content:"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u0623\u0645\u0631.",ephemeral:!0}):await t.editReply({content:"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u0623\u0645\u0631."}))}catch(r){console.error("Failed to send error reply:",r)}}});async function zr(t,e){if(e.get(Ot.warnings.list.path,async(r,s)=>{let n=await y.getWarnings();s.json(n)}),e.get(Ot.stats.get.path,async(r,s)=>{let n=await y.getStats(),a=process.env.DISCORD_TOKEN?"online":"offline";s.json({...n,botStatus:a})}),process.env.DISCORD_TOKEN)try{await Vr(),console.log("Discord bot started successfully.")}catch(r){console.error("Failed to start Discord bot:",r)}else console.warn("DISCORD_TOKEN not found. Bot will not start.");return t}var Wr=le(kt(),1),Hr=le(require("fs"),1),Rt=le(require("path"),1);function Gr(t){let e=Rt.default.resolve(__dirname,"public");if(!Hr.default.existsSync(e))throw new Error(`Could not find the build directory: ${e}, make sure to build the client first`);t.use(Wr.default.static(e)),t.use("*",(r,s)=>{s.sendFile(Rt.default.resolve(e,"index.html"))})}var Jr=require("http"),Oe=(0,dt.default)(),ct=(0,Jr.createServer)(Oe);Oe.use(dt.default.json({verify:(t,e,r)=>{t.rawBody=r}}));Oe.use(dt.default.urlencoded({extended:!1}));function lt(t,e="express"){let r=new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0});console.log(`${r} [${e}] ${t}`)}Oe.use((t,e,r)=>{let s=Date.now(),n=t.path,a,o=e.json;e.json=function(i,...u){return a=i,o.apply(e,[i,...u])},e.on("finish",()=>{let i=Date.now()-s;if(n.startsWith("/api")){let u=`${t.method} ${n} ${e.statusCode} in ${i}ms`;a&&(u+=` :: ${JSON.stringify(a)}`),lt(u)}}),r()});(async()=>{await zr(ct,Oe),Oe.use((e,r,s,n)=>{let a=e.status||e.statusCode||500,o=e.message||"Internal Server Error";throw s.status(a).json({message:o}),e}),Gr(Oe);let t=parseInt(process.env.PORT||"5000",10);ct.listen({port:t,host:"0.0.0.0",reusePort:!0},()=>{lt(`serving on port ${t}`)}).on("error",e=>{e.code==="EADDRINUSE"&&(lt(`Port ${t} is busy, retrying...`),setTimeout(()=>{ct.close(),ct.listen(t,"0.0.0.0")},1e3))})})();0&&(module.exports={log});
/*! Bundled license information:

express/lib/router/layer.js:
express/lib/router/route.js:
express/lib/router/index.js:
express/lib/middleware/init.js:
express/lib/middleware/query.js:
express/lib/view.js:
express/lib/application.js:
express/lib/request.js:
express/lib/express.js:
express/index.js:
  (*!
   * express
   * Copyright(c) 2009-2013 TJ Holowaychuk
   * Copyright(c) 2013 Roman Shtylman
   * Copyright(c) 2014-2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

express/lib/utils.js:
express/lib/response.js:
  (*!
   * express
   * Copyright(c) 2009-2013 TJ Holowaychuk
   * Copyright(c) 2014-2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
